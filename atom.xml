<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Powersee的博客</title>
  
  
  <link href="https://powersee.github.io/atom.xml" rel="self"/>
  
  <link href="https://powersee.github.io/"/>
  <updated>2023-04-29T16:10:29.090Z</updated>
  <id>https://powersee.github.io/</id>
  
  <author>
    <name>powersee</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>大聪明，用 js 替换图片链接，抛弃对象存储</title>
    <link href="https://powersee.github.io/2023/04/js-replace-img-link/"/>
    <id>https://powersee.github.io/2023/04/js-replace-img-link/</id>
    <published>2023-04-29T16:03:57.000Z</published>
    <updated>2023-04-29T16:10:29.090Z</updated>
    
    <content type="html"><![CDATA[<p>之前讲到<a href="/2023/04/about-oss/">对象存储</a>，我使用了腾讯云的对象存储来当博客图床。</p><p>用了一段时间后，我还是决定弃用了。一方面是担心待会别有用心的人，来盗刷我的对象存储流量，毕竟网上有很多人遇过了，谁叫对象存储是可以欠费的呢。</p><p>另一方面，我分析一下，现在对象存储选的是广州的服务器，而我自己有一台香港的服务器。如果我将博客图片，放到这台香港服务器上面，速度方面还是绰绰有余的。</p><p>那要怎么将图片放到自己的服务器上呢？🤔如果是其他人，可能需要去装个图床应用之类的。但是我不需要，因为我的备份博客就在这台服务器上面。😉</p><p><a href="https://powersee.github.io/">https://powersee.github.io/</a> 这个网址访问的是 GitHub Pages 上的网页文件。</p><p>而 <a href="https://blog.powersee.top/">https://blog.powersee.top/</a> 访问的是我服务器上面的网页文件。</p><p>我实现备份博客的方法也很简单，因为我的博客托管在 GitHub 上面，所以我在服务器上面设置定时任务，每天凌晨自动执行 git pull  来更新博客。🤗</p><p>那么我博客上的图片，服务器上都是有的。</p><p>此时简单的方法就是，将文章中的图片链接，都加上备份博客 <a href="https://blog.powersee.top/">https://blog.powersee.top/</a> 的前缀，在 vscode 里面批量替换可以很快处理完。</p><p>但是这样有些问题，就是当我写好文章后，在本地执行 <code>hexo s</code> 来预览时，图片就加载不出来，因为此时图片还没有传到服务器上。</p><p>所以我的想法是，当通过 <a href="https://powersee.github.io/">https://powersee.github.io/</a> 访问我的博客时，才替换图片链接。通过其它的域名访问，不会替换。</p><p>这样的要求，就需要使用 JavaScript 来实现。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">host</span> == <span class="string">&quot;powersee.github.io&quot;</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前网页中 body 的所有 img 标签</span></span><br><span class="line"><span class="keyword">const</span> imgElements = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;body img&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历每个 img 标签</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imgElements.<span class="property">length</span>; i++) &#123;</span><br><span class="line"><span class="keyword">const</span> imgElement = imgElements[i];</span><br><span class="line"><span class="keyword">const</span> src = imgElement.<span class="title function_">getAttribute</span>(<span class="string">&#x27;src&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查 img 标签的 src 是否以 /img/ 开头</span></span><br><span class="line"><span class="keyword">if</span> (src.<span class="title function_">startsWith</span>(<span class="string">&#x27;/img/&#x27;</span>)) &#123;</span><br><span class="line">imgElement.<span class="title function_">setAttribute</span>(<span class="string">&#x27;src&#x27;</span>, src.<span class="title function_">replace</span>(<span class="string">&#x27;/img/&#x27;</span>, <span class="string">&#x27;https://blog.powersee.top/img/&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>于是我在 js 文件中加入这段代码，就实现了我的目的。😘</p><p>假如我以后不需要替换了，那么只需要去掉这段代码就行。😎</p><p>如果我以后换域名了，也只需要修改这段代码，不需要去替换所有的文章原文本。</p><p>我个人对此还是比较满意的。😊</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;之前讲到&lt;a href=&quot;/2023/04/about-oss/&quot;&gt;对象存储&lt;/a&gt;，我使用了腾讯云的对象存储来当博客图床。&lt;/p&gt;
&lt;p&gt;用了一段时间后，我还是决定弃用了。一方面是担心待会别有用心的人，来盗刷我的对象存储流量，毕竟网上有很多人遇过了，谁叫对象存储是可以欠费</summary>
      
    
    
    
    
    <category term="JavaScript" scheme="https://powersee.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>将博客头像更改为 SVG</title>
    <link href="https://powersee.github.io/2023/04/blog-logo-svg/"/>
    <id>https://powersee.github.io/2023/04/blog-logo-svg/</id>
    <published>2023-04-28T16:11:04.000Z</published>
    <updated>2023-04-28T16:14:19.923Z</updated>
    
    <content type="html"><![CDATA[<p>现在的博客主题 <a href="https://github.com/imfycc/hexo-themes-yearn">yearn</a> 需要使用头像，我使用的是一张 jpeg logo 图片，大小是 8KB。</p><p>在访问首页的时候需要加载它，访问博客文章的时候也需要。</p><p>然而我观察到 GitHub pages 有时候访问速度只有 6、7KB，这就难顶了，一秒还没法将 logo 加载出来。看来这是一个急需解决的问题。</p><p>那么分析一下，我的头像其实很简单，就是黑色的背景，然后上面是我的昵称 Powersee，这其实可以用 svg 画出来。</p><p>我现在用这样的代码把它弄成 svg</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 180 180&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rect</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;black&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span> <span class="comment">&lt;!-- 黑色背景矩形 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;45%&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;.3em&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;48&quot;</span> <span class="attr">font-family</span>=<span class="string">&quot;sans-serif&quot;</span>&gt;</span>Power<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="comment">&lt;!-- 文字 &quot;Power&quot;，居中对齐，白色填充，字号 48px，字体 sans-serif --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;65%&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;.3em&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;48&quot;</span> <span class="attr">font-family</span>=<span class="string">&quot;sans-serif&quot;</span>&gt;</span>_see<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下</p><svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180">  <rect width="100%" height="100%" fill="black"></rect> <!-- 黑色背景矩形 -->  <text x="50%" y="45%" text-anchor="middle" dy=".3em" fill="white" font-size="48" font-family="sans-serif">Power</text> <!-- 文字 "Power"，居中对齐，白色填充，字号 48px，字体 sans-serif -->    <text x="50%" y="65%" text-anchor="middle" dy=".3em" fill="white" font-size="48" font-family="sans-serif">_see</text></svg><blockquote><p>SVG 指可伸缩矢量图形 (Scalable Vector Graphics)</p></blockquote><p>不要注释的话，它只需要 393 字节，也就是 393Byte，不到 0.4KB，很不错。原本需要加载一张 8KB 的外部图片，现在改为 svg 可以直接写在 HTML 里面，而且需要加载的数据也只需原来的 5%。</p><p>那么就开始修改主题吧，需要修改 <code>index.ejs</code> 和 <code>ariticle.ejs</code> 这两个文件。</p><ul><li>index.ejs</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;div class=&quot;face-img&quot;&gt;&lt;img src=&quot;&lt;%=theme.avatar%&gt;&quot;&gt;&lt;/div&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;face-img&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 180 180&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;black&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span> <span class="comment">&lt;!-- 黑色背景矩形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;45%&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;.3em&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;48&quot;</span> <span class="attr">font-family</span>=<span class="string">&quot;sans-serif&quot;</span>&gt;</span>Power<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="comment">&lt;!-- 文字 &quot;Power&quot;，居中对齐，白色填充，字号 48px，字体 sans-serif --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;65%&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;.3em&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;48&quot;</span> <span class="attr">font-family</span>=<span class="string">&quot;sans-serif&quot;</span>&gt;</span>_see<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ariticle.ejs</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;img src=&quot;&lt;%=theme.avatar%&gt;&quot;&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 180 180&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rect</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;black&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;45%&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;.3em&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;48&quot;</span> <span class="attr">font-family</span>=<span class="string">&quot;sans-serif&quot;</span>&gt;</span>Power<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;65%&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;.3em&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;48&quot;</span> <span class="attr">font-family</span>=<span class="string">&quot;sans-serif&quot;</span>&gt;</span>_see<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>找到里面引入 logo 的 img 位置，将它替换为 svg。</p><p>接着修改 css 文件，更改一下样式。就成功使用 svg 作为头像了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;现在的博客主题 &lt;a href=&quot;https://github.com/imfycc/hexo-themes-yearn&quot;&gt;yearn&lt;/a&gt; 需要使用头像，我使用的是一张 jpeg logo 图片，大小是 8KB。&lt;/p&gt;
&lt;p&gt;在访问首页的时候需要加载它，访问博客文章的</summary>
      
    
    
    
    
    <category term="web" scheme="https://powersee.github.io/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Mac 屏幕使用时间被 HelpViewer 占满</title>
    <link href="https://powersee.github.io/2023/04/screentime-helpviewer/"/>
    <id>https://powersee.github.io/2023/04/screentime-helpviewer/</id>
    <published>2023-04-27T17:15:40.000Z</published>
    <updated>2023-04-27T17:25:33.364Z</updated>
    
    <content type="html"><![CDATA[<p>我打开 Mac 上面的屏幕使用时间，发现有一个叫「HelpViewer」的应用，占满了今天的使用时间。</p><p><img src="/img/2023/screentime-helpviewer.webp" alt="screentime-helpviewer"></p><p>而昨天居然占满了 24 小时。</p><p><img src="/img/2023/HelpViewer-24h.webp" alt="HelpViewer-24h"></p><p>这个问题我之前也遇过，不过重启机器后好像就好了。现在又再次出现，我觉得还是得查查怎么解决。</p><p>在苹果的社区里我看到这样的讨论：<a href="https://discussions.apple.com/thread/253321652">HelpViewer - Apple Community</a></p><p>里面提到，可以通过给这个 APP 限额来解决。直接限制它每天只能使用 1 分钟。</p><p><img src="/img/2023/HelpViewer-limit.webp" alt="HelpViewer-limit"></p><p>我尝试了，发现没有用，还是会继续统计 HelpViewer 的使用时间。</p><p>不过重启机器之后，好像就不会了。之后我又观察了几天，但是这几天的屏幕时间里都没有 HelpViewer，所以并不能证明给它限额有效。</p><p>但是，目前好像就只有这一个方法了。</p><p>这个 bug 存在快两年了，苹果居然还没修复。难道说是没法修复的？看有的网友说是内存泄露的问题。目前看来如果限额也没用，就只能重启了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我打开 Mac 上面的屏幕使用时间，发现有一个叫「HelpViewer」的应用，占满了今天的使用时间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/screentime-helpviewer.webp&quot; alt=&quot;screentime-helpviewer&quot;&gt;&lt;/</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>如何禁止 Firefox 的更新提示</title>
    <link href="https://powersee.github.io/2023/04/Firefox-no-update/"/>
    <id>https://powersee.github.io/2023/04/Firefox-no-update/</id>
    <published>2023-04-26T16:18:00.000Z</published>
    <updated>2023-04-26T16:24:20.025Z</updated>
    
    <content type="html"><![CDATA[<p>火狐浏览器，非常烦人，每次打开都会提示更新。我不想更新，我不在乎安全，因为它不是我的主力浏览器。</p><p><img src="/img/2023/firefox-update.png" alt="firefox-update"></p><p>网上搜一下，还是有挺多人对此反感。好在解决方法不算麻烦，只需要修改一个文件。</p><p>首先在桌面或者开始菜单里面，找到 Firefox 的图标，右键「打开文件所在的位置」</p><p>然后进入 defaults 、 pref</p><p>我的是在 <code>C:\Program Files\Firefox Developer Edition\defaults\pref</code></p><p>我们可以使用记事本来打开里面的 <code>channel-prefs.js</code></p><p>我的里面最后一行显示的是这个</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pref(&quot;app.update.channel&quot;, &quot;aurora&quot;);</span><br></pre></td></tr></table></figure><p>那么我只需要把后面引号中的内容去掉即可，也就是把 aurora 删掉，变成</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pref(&quot;app.update.channel&quot;, &quot;&quot;);</span><br></pre></td></tr></table></figure><p>此时保存一下文件。（由于我浏览器装在 C:\Program Files\ 里面，所以需要管理员权限才能保存，如果你们是装在其它位置，也许可以不用）</p><p>之后再打开浏览器，就不会有更新提示了。</p><p><img src="/img/2023/firefox-no-update.png" alt="firefox-no-update"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;火狐浏览器，非常烦人，每次打开都会提示更新。我不想更新，我不在乎安全，因为它不是我的主力浏览器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/firefox-update.png&quot; alt=&quot;firefox-update&quot;&gt;&lt;/p&gt;
&lt;p&gt;网上搜一下，还是有挺多人</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>解决 DBeaver 只显示默认的一个数据库 postgres</title>
    <link href="https://powersee.github.io/2023/04/DBeaver-postgresql/"/>
    <id>https://powersee.github.io/2023/04/DBeaver-postgresql/</id>
    <published>2023-04-25T17:04:46.000Z</published>
    <updated>2023-04-25T17:16:18.618Z</updated>
    
    <content type="html"><![CDATA[<p>右键连接，编辑连接。在「连接设置」「PostgreSQL」里面，勾选上「显示非缺省的数据库」就可以了。</p><p><img src="/img/2023/postgresql-show-all-database.webp" alt="postgresql-show-all-database"></p><p>重新连接就可以看到所有数据库了。</p><p><img src="/img/2023/postgres-all-database.jpg" alt="postgres-all-database"></p><p>如果是在英文语境下，它的设置是 <code>Show all databases</code>，感觉就离谱，这玩意是怎么翻译成「显示非缺省的数据库」的？</p><p><img src="/img/2023/show-all-databases.jpg" alt="show-all-databases"></p><p>问题是没文化的我，还不知道「缺省」是什么意思，翻译一下，才知道是 default……</p><p><img src="/img/2023/default.webp" alt="default"></p><blockquote><p>缺省(quē shěng)，又译“默认”。</p><p>——百度百科</p></blockquote><p>知乎上也有不少的讨论：<a href="https://www.zhihu.com/question/20953160">「缺省」这个词是如何从英语 “Default” 翻译过来的？ - 知乎</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;右键连接，编辑连接。在「连接设置」「PostgreSQL」里面，勾选上「显示非缺省的数据库」就可以了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/postgresql-show-all-database.webp&quot; alt=&quot;postgresql-show-al</summary>
      
    
    
    
    
    <category term="SQL" scheme="https://powersee.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>使用 Docker 运行 PostgreSQL 数据库</title>
    <link href="https://powersee.github.io/2023/04/docker-postgresql/"/>
    <id>https://powersee.github.io/2023/04/docker-postgresql/</id>
    <published>2023-04-24T16:00:24.000Z</published>
    <updated>2023-04-24T16:03:11.899Z</updated>
    
    <content type="html"><![CDATA[<p>目前发现很多开源项目都使用 postgresql 来存放数据，因此我认为很有必要学习看看。</p><p>一开始我使用 Rock 5B 本地安装 postgresql，安装的是 14 的版本。之后要修改配置文件，才能够外部访问。感觉还有挺多需要折腾的。</p><p>后来我觉得，还是用 Docker 运行一个来学习好了，快捷方便。而且用完直接删除就行。</p><p>我们可以到 <a href="https://hub.docker.com/_/postgres/tags">Docker Hub</a> 查看 Docker 镜像的情况。我拉取了 4 个镜像，看来用 alpine 标签的镜像最省空间。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># docker images postgres</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">postgres     15        ceccf204404e   12 days ago     379MB</span><br><span class="line">postgres     15.0      027eba2e8939   6 months ago    377MB</span><br><span class="line">postgres     alpine    1149d285a5f5   15 months ago   209MB</span><br><span class="line">postgres     latest    07e2ee723e2d   15 months ago   374MB</span><br></pre></td></tr></table></figure><p>启动</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d --name=postgres-test -p 2345:5432 -e POSTGRES_PASSWORD=password postgres:alpine</span><br></pre></td></tr></table></figure><p>启动信息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># docker logs postgres-test</span><br><span class="line">The files belonging to this database system will be owned by user &quot;postgres&quot;.</span><br><span class="line">This user must also own the server process.</span><br><span class="line"></span><br><span class="line">The database cluster will be initialized with locale &quot;en_US.utf8&quot;.</span><br><span class="line">The default database encoding has accordingly been set to &quot;UTF8&quot;.</span><br><span class="line">The default text search configuration will be set to &quot;english&quot;.</span><br><span class="line"></span><br><span class="line">Data page checksums are disabled.</span><br><span class="line"></span><br><span class="line">fixing permissions on existing directory /var/lib/postgresql/data ... ok</span><br><span class="line">creating subdirectories ... ok</span><br><span class="line">selecting dynamic shared memory implementation ... posix</span><br><span class="line">selecting default max_connections ... 100</span><br><span class="line">selecting default shared_buffers ... 128MB</span><br><span class="line">selecting default time zone ... UTC</span><br><span class="line">creating configuration files ... ok</span><br><span class="line">running bootstrap script ... ok</span><br><span class="line">sh: locale: not found</span><br><span class="line">2023-04-24 07:29:18.876 UTC [31] WARNING:  no usable system locales were found</span><br><span class="line">performing post-bootstrap initialization ... ok</span><br><span class="line">syncing data to disk ... ok</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Success. You can now start the database server using:</span><br><span class="line"></span><br><span class="line">    pg_ctl -D /var/lib/postgresql/data -l logfile start</span><br><span class="line"></span><br><span class="line">initdb: warning: enabling &quot;trust&quot; authentication for local connections</span><br><span class="line">You can change this by editing pg_hba.conf or using the option -A, or</span><br><span class="line">--auth-local and --auth-host, the next time you run initdb.</span><br><span class="line">waiting for server to start....2023-04-24 07:29:22.836 UTC [37] LOG:  starting PostgreSQL 14.1 on x86_64-pc-linux-musl, compiled by gcc (Alpine 10.3.1_git20211027) 10.3.1 20211027, 64-bit</span><br><span class="line">2023-04-24 07:29:22.862 UTC [37] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span><br><span class="line">2023-04-24 07:29:22.890 UTC [38] LOG:  database system was shut down at 2023-04-24 07:29:21 UTC</span><br><span class="line">2023-04-24 07:29:22.910 UTC [37] LOG:  database system is ready to accept connections</span><br><span class="line"> done</span><br><span class="line">server started</span><br><span class="line"></span><br><span class="line">/usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*</span><br><span class="line"></span><br><span class="line">waiting for server to shut down...2023-04-24 07:29:23.015 UTC [37] LOG:  received fast shutdown request</span><br><span class="line">.2023-04-24 07:29:23.017 UTC [37] LOG:  aborting any active transactions</span><br><span class="line">2023-04-24 07:29:23.019 UTC [37] LOG:  background worker &quot;logical replication launcher&quot; (PID 44) exited with exit code 1</span><br><span class="line">2023-04-24 07:29:23.021 UTC [39] LOG:  shutting down</span><br><span class="line">2023-04-24 07:29:23.080 UTC [37] LOG:  database system is shut down</span><br><span class="line"> done</span><br><span class="line">server stopped</span><br><span class="line"></span><br><span class="line">PostgreSQL init process complete; ready for start up.</span><br><span class="line"></span><br><span class="line">2023-04-24 07:29:23.207 UTC [1] LOG:  starting PostgreSQL 14.1 on x86_64-pc-linux-musl, compiled by gcc (Alpine 10.3.1_git20211027) 10.3.1 20211027, 64-bit</span><br><span class="line">2023-04-24 07:29:23.208 UTC [1] LOG:  listening on IPv4 address &quot;0.0.0.0&quot;, port 5432</span><br><span class="line">2023-04-24 07:29:23.208 UTC [1] LOG:  listening on IPv6 address &quot;::&quot;, port 5432</span><br><span class="line">2023-04-24 07:29:23.211 UTC [1] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span><br><span class="line">2023-04-24 07:29:23.238 UTC [49] LOG:  database system was shut down at 2023-04-24 07:29:23 UTC</span><br><span class="line">2023-04-24 07:29:23.257 UTC [1] LOG:  database system is ready to accept connections</span><br></pre></td></tr></table></figure><p>进入容器内的 shell，切换到 postgres 用户，切换到 SQL Shell(psql)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># docker exec -it postgres-test bash</span><br><span class="line">bash-5.1# su postgres</span><br><span class="line">/ $ psql</span><br><span class="line">psql (14.1)</span><br><span class="line">Type &quot;help&quot; for help.</span><br><span class="line"></span><br><span class="line">postgres=#</span><br></pre></td></tr></table></figure><p>执行 <code>\l</code> 查看所有数据库，<code>\q</code> 退出 psql</p><p>如果我们想用图形化应用来连接 docker 中的 postgresql，需要用到刚才建立容器时使用的端口。例如我刚才用的是 <code>2345:5432</code>，那么我应该用此时服务器的 IP 地址和 2345 端口。</p><p>我使用的是免费的 <a href="https://dbeaver.io/">DBeaver</a>，它在 GitHub 上面有 3 万多颗星⭐️。</p><p>「新建数据库连接」选择 postgres，填写 IP 地址、端口和密码。</p><p><img src="/img/2023/postgresql-DBeaver.webp" alt="postgresql-DBeaver"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;目前发现很多开源项目都使用 postgresql 来存放数据，因此我认为很有必要学习看看。&lt;/p&gt;
&lt;p&gt;一开始我使用 Rock 5B 本地安装 postgresql，安装的是 14 的版本。之后要修改配置文件，才能够外部访问。感觉还有挺多需要折腾的。&lt;/p&gt;
&lt;p&gt;后来我</summary>
      
    
    
    
    
    <category term="docker" scheme="https://powersee.github.io/tags/docker/"/>
    
    <category term="SQL" scheme="https://powersee.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>chkservice 图形化管理 systemd</title>
    <link href="https://powersee.github.io/2023/04/chkservice/"/>
    <id>https://powersee.github.io/2023/04/chkservice/</id>
    <published>2023-04-23T16:09:15.000Z</published>
    <updated>2023-04-23T16:11:09.485Z</updated>
    
    <content type="html"><![CDATA[<p>我觉得使用 systemctl 来管理 systemd 服务太繁琐了，想了解有没有什么工具，可以更加方便的管理。</p><p>于是通过 Google 搜 systemd gui 发现了 <a href="https://github.com/linuxenko/chkservice">chkservice</a></p><p>是一个开源项目，有 300 多颗星，不过好久没更新了。</p><p>我们可以直接使用 apt 来安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt install chkservice</span><br></pre></td></tr></table></figure><p>其它发行版可以编译后安装。</p><p>在终端直接执行 chkservice 就可以运行起来。</p><p><img src="/img/2023/chkservice.webp" alt="chkservice"></p><p>按上下键可以切换，这个不用说应该都会，但是其它的用法呢？GitHub 上面也没有文档。</p><p>其实只要我们输入 <code>?</code> 就能看到帮助菜单，也就是按住 shift 再按一下 <code>/?</code> 这颗按键。</p><p><img src="/img/2023/chkservice-help.webp" alt="chkservice-help"></p><p>挺好的，按 <code>s</code> 键可以启动或停止，空格键可以开启关闭「开机自启」。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我觉得使用 systemctl 来管理 systemd 服务太繁琐了，想了解有没有什么工具，可以更加方便的管理。&lt;/p&gt;
&lt;p&gt;于是通过 Google 搜 systemd gui 发现了 &lt;a href=&quot;https://github.com/linuxenko/chkse</summary>
      
    
    
    
    
    <category term="Linux" scheme="https://powersee.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>命令行中的文件管理器 ranger</title>
    <link href="https://powersee.github.io/2023/04/ranger/"/>
    <id>https://powersee.github.io/2023/04/ranger/</id>
    <published>2023-04-22T16:10:57.000Z</published>
    <updated>2023-04-22T16:11:59.036Z</updated>
    
    <content type="html"><![CDATA[<p>ranger 一个开源的文件管理器，目前（2023年04月22日）在 <a href="https://github.com/ranger/ranger">GitHub</a> 上面有 13.2k 颗星。它特别的地方在于，它是在终端里面使用的文件管理器。</p><p>我们可以通过 pip 来安装</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install ranger-fm</span><br></pre></td></tr></table></figure><p>安装好后，输入 ranger 就可以打开它。</p><p><a href="https://github.com/ranger/ranger/wiki/Official-user-guide">官方用户指导</a></p><p>打开之后默认是分成两栏或者三栏的，我们可以使用方向键来移动。</p><p>其实和 vim 的使用方法很像的，例如输入冒号 : 之后，可以用 set 来开关各种功能。</p><p><img src="/img/2023/ranger-set-command.webp" alt="ranger-set-command"></p><p>我这里输入 <code>:set draw_borders both</code> 来打开边框。敲下回车键之后，边框就出来了。个人感觉这样比较好看，而且区别清晰，更直观。</p><p><img src="/img/2023/ranger-border.webp" alt="ranger-border"></p><p>其实从顶部和底部，我们还可以获取到很多信息。顶部就是当前的路径，和在 Windows 里使用「资源管理器」很像。</p><p>底部可以看到文件的修改时间。右边可以看到磁盘的剩余空间。</p><p>按下键盘上的 g 会弹出快捷指令。此时再按一下 h，就可以跳转到用户目录下。就是 go home。我经常使用它来切换路径。</p><p><img src="/img/2023/ranger-g.webp" alt="ranger-g"></p><p>按下 z 也会弹出指令，主要是更改一些设置</p><p><img src="/img/2023/ranger-z.webp" alt="ranger-z"></p><p>例如按 h 就可以显示隐藏文件。（除了使用 zh 之外，也可以使用退格键Backspace）</p><p>举一个例子，比如说我想查看 postgresql 的配置文件。那么以前我得这么做</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /etc/postgresql</span><br><span class="line">ls</span><br><span class="line">cd 14</span><br><span class="line">ls</span><br><span class="line">cd main</span><br><span class="line">ls</span><br></pre></td></tr></table></figure><p>不断地使用 cd 和 ls</p><p>但是我现在使用 ranger 的话，效率就提高很多了</p><p>先按 <code>ge</code> 就可以切换到 &#x2F;etc 里面，然后我可以再按 <code>zz</code> 调出过滤器，输入 post，它就会筛选出带 post 的文件或者文件夹。（比 search 好用，search 还得输入文字之后按回车键，filter 是实时的）</p><p><img src="/img/2023/ranger-filter.webp" alt="ranger-filter"></p><p>之后我只需要一直按方向键右 → 来进入文件夹，还可以预览文件的内容。</p><p><img src="/img/2023/ranger-pg-config.webp" alt="ranger-pg-config"></p><p>再说说一些基本操作</p><p>ranger 默认情况下，是使用 vim 来打开文本文件的，例如上面的 conf 或者 py 等等。如果我想使用 nano 来打开，那可以先按 <code>r</code> 再输入 nano 回车。</p><p>删除文件可以用 F8</p><p>复制粘贴，先复制 yy 再粘贴 pp</p><p>剪切粘贴 dd pp</p><p>不过这样只是对单个文件的操作，如果要操作多个，可以先用空格键标记文件，此时文件名会高亮，并且缩进一个字符。</p><p><img src="/img/2023/ranger-space-Mark.jpg" alt="ranger-space-Mark"></p><p>再按一次空格键可以取消标记。</p><p>重命名文件 cw</p><p>我自己给 ranger 设置了别名 rr</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias rr=&#x27;ranger&#x27;</span><br></pre></td></tr></table></figure><p>这样可以更快速地打开它。</p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>按 g 的时候会弹出很多路径让我们快捷切换。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">key          command</span><br><span class="line"> L           cd -r %f</span><br><span class="line"> l           cd -r .</span><br><span class="line"> /           cd /</span><br><span class="line"> r           cd /</span><br><span class="line"> d           cd /dev</span><br><span class="line"> e           cd /etc</span><br><span class="line"> m           cd /media</span><br><span class="line"> M           cd /mnt</span><br><span class="line"> o           cd /opt</span><br><span class="line"> s           cd /srv</span><br><span class="line"> p           cd /tmp</span><br><span class="line"> u           cd /usr</span><br><span class="line"> ?           cd /usr/share/doc/ranger</span><br><span class="line"> v           cd /var</span><br><span class="line"> h           cd ~</span><br><span class="line"> i           eval fm.cd(&#x27;/run/media/&#x27; + os.getenv(&#x27;USER&#x27;))</span><br><span class="line"> R           eval fm.cd(ranger.RANGERDIR)</span><br><span class="line"> g           move to=0</span><br><span class="line"> c           tab_close</span><br><span class="line"> T           tab_move -1</span><br><span class="line"> t           tab_move 1</span><br><span class="line"> n           tab_new</span><br></pre></td></tr></table></figure><p>我们其实是可以自定义这些路径的。我们在终端执行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ranger --copy-config=rc.conf</span><br></pre></td></tr></table></figure><p>然后到 ~&#x2F;.config&#x2F;ranger 里面找到这个文件，一共有 700 多行。到 450 行可以看到这些</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">450 map gh cd ~</span><br><span class="line">451 map ge cd /etc</span><br><span class="line">452 map gu cd /usr</span><br><span class="line">453 map gd cd /dev</span><br><span class="line">454 map gl cd -r .</span><br><span class="line">455 map gL cd -r %f</span><br><span class="line">456 map go cd /opt</span><br><span class="line">457 map gv cd /var/log/</span><br></pre></td></tr></table></figure><p>我们可以修改，或者添加都行，例如我添加多一行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">map g1 cd /etc/postgresql/14/main/</span><br></pre></td></tr></table></figure><p>那么我只要按 <code>g1</code> 就可以切换到 <code>/etc/postgresql/14/main/</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ranger 一个开源的文件管理器，目前（2023年04月22日）在 &lt;a href=&quot;https://github.com/ranger/ranger&quot;&gt;GitHub&lt;/a&gt; 上面有 13.2k 颗星。它特别的地方在于，它是在终端里面使用的文件管理器。&lt;/p&gt;
&lt;p&gt;我们</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>自建 GitHub 代理服务</title>
    <link href="https://powersee.github.io/2023/04/github-proxy/"/>
    <id>https://powersee.github.io/2023/04/github-proxy/</id>
    <published>2023-04-21T16:08:43.000Z</published>
    <updated>2023-04-21T16:28:09.499Z</updated>
    
    <content type="html"><![CDATA[<p>我的浏览器有装一个<a href="https://github.com/RC1844/FastGithub">油猴脚本</a></p><p>这样我在访问 GitHub 的时候，有一些代理选项。</p><p><img src="/img/2023/image-20230420172817331.webp" alt="image-20230420172817331"></p><p>因为大多数时候，我如果不用梯子，直接点击原链接，是没法下载成功的。</p><p>但是后面的代理链接，有时候也不是很好用，像这种套 cloudflare 的，一天 10 万次居然都能被用完。看来苦逼的国内用户需求还是挺大的。</p><p>它的原理其实也不难。</p><p>原链接：<a href="https://github.com/usefathom/fathom/releases/download/v1.3.1/fathom_1.3.1_linux_arm64.tar.gz">https://github.com/usefathom/fathom/releases/download/v1.3.1/fathom_1.3.1_linux_arm64.tar.gz</a></p><p>代理链接：<a href="https://github.rc1844.workers.dev/usefathom/fathom/releases/download/v1.3.1/fathom_1.3.1_linux_amd64.tar.gz">https://github.rc1844.workers.dev/usefathom/fathom/releases/download/v1.3.1/fathom_1.3.1_linux_amd64.tar.gz</a></p><p>也就是把 <a href="https://github.com/">https://github.com</a> 换成 <a href="https://github.rc1844.workers.dev/">https://github.rc1844.workers.dev</a></p><p>workers.dev 是 cloudflare 的域名，我们也可以自建自己的 worker 来代理 GitHub。需要使用开源项目：<a href="https://github.com/hunshcn/gh-proxy">https://github.com/hunshcn/gh-proxy</a></p><p>项目的 readme 里面也有写怎么自建 worker 代理。网上也有挺多人写教程的，我自己搭建了一个，结果发现，我的网络好像连访问 cf 都不流畅……</p><p>后来了解到，原来是 workers.dev 已经被墙了……</p><p>解决方法是绑定自己的域名，不过它要求域名的 DNS 解析，得是托管在 cloudflare 才行。</p><p>接着我想研究看看搭建在自己的服务器上，反正服务器的流量一般也用不完。</p><p>使用 docker 的话，很快，一行命令就行，没什么难度。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d --name=&quot;gh-proxy-py&quot; \</span><br><span class="line">  -p 0.0.0.0:80:80 \</span><br><span class="line">  --restart=always \</span><br><span class="line">  hunsh/gh-proxy-py:latest</span><br></pre></td></tr></table></figure><p>不过这镜像有点大，居然要 910MB ……</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hunsh/gh-proxy-py        latest    745d6b4639c3   23 months ago   910MB</span><br></pre></td></tr></table></figure><p>体验一下看到有效果，赶紧把它删了，我这小小的服务器空间宝贵，舍不得。</p><p>我打算部署 python 版本，因为相比之下占用空间就小很多了。</p><p>先把项目克隆到服务器上，然后修改 <code>main.py</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/hunshcn/gh-proxy</span><br></pre></td></tr></table></figure><p>需要安装依赖</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install flask requests</span><br></pre></td></tr></table></figure><p>运行起来</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 app/main.py</span><br></pre></td></tr></table></figure><p>也是很简单就可以运行起来，看到可以正常访问之后，我再次把 ip 改为 127.0.0.1 端口就随便设置一个，之后再使用反向代理。</p><p>目前我就使用 screen 让它在后台运行着，比较好的处理方式应该是用 systemd。</p><p>观察了下，感觉还行，占用的系统资源并不多。</p><p>我在自己的服务器上搭建了一个，在 cloudflare 的 workers 也搭建一个。之后可以将自己的链接添加到油猴脚本里面。</p><p><img src="/img/2023/my-github-proxy-shadow.webp" alt="my-github-proxy-shadow"></p><p>就是替换掉脚本中原来的，这样我可以在 GitHub 上面点击那个属于自己的按钮。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我的浏览器有装一个&lt;a href=&quot;https://github.com/RC1844/FastGithub&quot;&gt;油猴脚本&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这样我在访问 GitHub 的时候，有一些代理选项。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/image-20230</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>自建网站访问统计服务 fathom</title>
    <link href="https://powersee.github.io/2023/04/fathom/"/>
    <id>https://powersee.github.io/2023/04/fathom/</id>
    <published>2023-04-20T16:07:27.000Z</published>
    <updated>2023-04-20T16:08:24.216Z</updated>
    
    <content type="html"><![CDATA[<p>最近给我的博客网站添加上网站统计服务，可以用来记录网站的访问情况。</p><p><img src="/img/2023/fathom-one-week-shadow.webp" alt="fathom-one-week-shadow"></p><p>这是一周的统计情况，比我预期的多。主要来源是：必应、百度、谷歌和 YouTube。访问最多的文章是<a href="/2023/03/tampermonkey-auto-signin/">油猴自动签到</a></p><p>我使用的是 fathom，是一个开源项目，在 <a href="https://github.com/usefathom/fathom">GitHub</a> 上面有 7 千多 star。</p><p>官方有提供一个预编译的 docker 镜像</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8080:8080 usefathom/fathom:latest</span><br></pre></td></tr></table></figure><p>我观察了下，日常占用内存只有 15MiB，非常轻量。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CPU %     MEM USAGE / LIMIT     MEM %     NET I/O</span><br><span class="line">0.04%     15.09MiB / 969.6MiB   1.56%     49MB / 33.1MB</span><br></pre></td></tr></table></figure><p>docker 镜像也只有 31.2MB</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">usefathom/fathom         latest    51cf88568278   3 years ago     31.2MB</span><br></pre></td></tr></table></figure><p>居然是 3 年前的镜像……</p><p>那么把代码克隆到本地，自己构建新的镜像吧。</p><p>结果失败了，看来是网络问题</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go install: github.com/gobuffalo/packr/v2/packr2@latest: module github.com/gobuffalo/packr/v2/packr2: Get &quot;https://proxy.golang.org/github.com/gobuffalo/packr/v2/packr2/@v/list&quot;: dial tcp 142.251.43.17:443: i/o timeout</span><br><span class="line">The command &#x27;/bin/sh -c go install github.com/gobuffalo/packr/v2/packr2@latest&#x27; returned a non-zero code: 1</span><br></pre></td></tr></table></figure><p>在 vps 上构建就没问题。不过我也不知道更新了那些内容，从网页上看，好像没有任何变化。</p><p>运行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8080:8080 fathom</span><br></pre></td></tr></table></figure><p>如果不是自己构建的，那么用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8080:8080 usefathom/fathom:latest</span><br></pre></td></tr></table></figure><p>之后我使用反向代理，将 fathom.powersee.top 转发到 8080 端口。</p><p>于是我这样使用了一个星期，好像也没出现什么问题。通过上面的网址，可以访问到 fathom 的 web 界面。</p><p>第一次访问需要设置网站的域名，于是我填了我博客的域名 </p><blockquote><p>powersee.github.io</p></blockquote><p>之后它会给一段 js 代码，把它加入到博客网站的里面就行了。</p><p>我之所以选择它，主要是因为它用的数据库是 sqlite，很轻量，哪怕用 docker 容器运行，镜像大小也只有 30 多 MB。而其它的网站统计服务，很多都是需要使用 MySQL 或者 postgresql，容器很大，太占用服务器空间了。</p><p>相比之下，fathom 可以说是非常轻量小巧。</p><p>如果我们进入容器内，会发现在 &#x2F;app 目录下，就两个文件而已。一个 fathom 可以执行文件，以及 fathom.db 的 sqlite 数据库。</p><p>那看来如果要迁移的话，复制数据库应该就行了。</p><p>其实直接运行 docker 容器应该只是测试用用而已。官方有<a href="https://github.com/usefathom/fathom/blob/master/docs/Installation%20instructions.md">说明文档</a>：建议的用法是下载 release 中的可执行文件，放到 &#x2F;usr&#x2F;local&#x2F;bin，然后写配置文件 <code>.env</code> 设置 NGINX 方向代理、创建 systemd 服务……</p><p>步骤是有点多，但是按照说明一步一步来，也不难。</p><p>不过我目前犹豫是否继续用下去。因为它开源的是 lite 版，很多功能得 Pro 版本才有。例如统计浏览器型号、用户操作系统这些。</p><p>我点进去看它 Pro 版本的收费情况，好家伙，最低一个月 14 刀。</p><p>我打算换其它的统计服务了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近给我的博客网站添加上网站统计服务，可以用来记录网站的访问情况。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/fathom-one-week-shadow.webp&quot; alt=&quot;fathom-one-week-shadow&quot;&gt;&lt;/p&gt;
&lt;p&gt;这是一周的统计情况，</summary>
      
    
    
    
    
    <category term="web" scheme="https://powersee.github.io/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Mac 提取图片中的文字，断网也能用</title>
    <link href="https://powersee.github.io/2023/04/mac-image-to-text/"/>
    <id>https://powersee.github.io/2023/04/mac-image-to-text/</id>
    <published>2023-04-19T16:01:02.000Z</published>
    <updated>2023-04-23T04:09:57.406Z</updated>
    
    <content type="html"><![CDATA[<p>我之前一直以为这个功能是 iOS 才能用的，因为以前有看到 iOS 相关的介绍。</p><p>没想到 Mac 其实也可以使用。方法是：选中一张图片，按空格键预览，之后按 command + A 这两颗按键，也就是全选嘛，图片中的文字就会高亮。然后再按 command + C  复制即可。</p><p><img src="/img/2023/preview-cmd-a.webp" alt="preview-cmd-a"></p><p>了解了一下，原来是 macOS Monterey 12 才有的功能。我之前的系统一直保留在 Big Sur 11，所以没见过这样的功能。</p><p>然后我测试了一下，断网也可以使用的。而且也可以不用按 command + A，点击右下角的图标就行了。</p><p><img src="/img/2023/preview-button-text.webp" alt="preview-button-text"></p><p>或者直接用鼠标按住左键来选中文字即可。</p><p><img src="/img/2023/preview-select-text.webp" alt="preview-select-text"></p><p>官方介绍：<a href="https://support.apple.com/zh-cn/guide/preview/prvw625a5b2c/mac">在 Mac 上的“预览”中使用“实况文本”与照片中的文本交互 - 官方 Apple 支持 (中国)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我之前一直以为这个功能是 iOS 才能用的，因为以前有看到 iOS 相关的介绍。&lt;/p&gt;
&lt;p&gt;没想到 Mac 其实也可以使用。方法是：选中一张图片，按空格键预览，之后按 command + A 这两颗按键，也就是全选嘛，图片中的文字就会高亮。然后再按 command + </summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>对象存储到底是什么东西？为何能轻松掏空我们的钱包？</title>
    <link href="https://powersee.github.io/2023/04/about-oss/"/>
    <id>https://powersee.github.io/2023/04/about-oss/</id>
    <published>2023-04-18T16:02:17.000Z</published>
    <updated>2023-04-23T04:09:57.336Z</updated>
    
    <content type="html"><![CDATA[<p>在网上闲逛看到对象存储，我之前以为这东西应该是企业什么的才需要用的吧，对于我们普通个人来说，应该不太会用到。</p><p>但是我对于它还是有些好奇的，然后最近一直在写博客，那我想着，要不把我博客上的图片，放到对象存储上，这样访问起来会快很多。</p><p>腾讯云好像没有免费空间，我的账号点进去没有，看别人好像有。</p><p>之后我看到这篇博文：<a href="https://www.cnblogs.com/Sky-seeker/p/15855538.html">国内外免费对象存储和CDN加速额度 - 梦幻之心星 - 博客园</a></p><p>里面讲到腾讯云可以花 1 块钱买一年 50G 的，于是我就买了一个。</p><p><img src="/img/2023/one-yuan-cos.webp" alt="one-yuan-cos"></p><p>但是还不知怎么使用，以及它的规则是怎么样的，流量超出了是不是会欠费？那么搜索看看别人是怎么用腾讯云 cos 来存博客图片的吧。</p><p>我找到了这篇文章，而且里面还讲了如何为博客的图片设置 CDN。</p><p><a href="https://jdhao.github.io/2020/03/16/tencent_cos_cdn_setup/">腾讯云对象存储博客图床开启 CDN 加速(不需要购买额外域名) - jdhao’s digital space</a></p><p>不过文章是 2020 年写的，到现在已经三年了。目前想要 cdn 只能使用自己已备案的域名才行，看来 cdn 部分难搞，估计只能使用 cos 了。</p><p>看来也挺容易理解，就是把图片放到腾讯云 cos，有点像我们把图片放到网盘里。但是对象存储，它会给我们一个链接，我们可以通过链接来访问放在对象存储中的文件，不需要登录或者输验证码什么的。</p><p>那我这一块钱买的套餐，有 50GB 的存储空间，可以放很多东西嘛。</p><p>可是收费方面我还是没明白。看了腾讯云的免费额度说明</p><blockquote><p>免费额度资源包不可抵扣 <strong>非标准存储容量</strong> 计费项，例如低频存储容量、归档存储容量、请求次数、流量等。</p></blockquote><p>估计就是说，我存 50G 在里面，这个可以免费，但是如果我要访问的话，就需要收费的。</p><p>主要就是——<strong>请求次数、流量</strong></p><p>我昨晚把博客里的 2023 年的图片，全部替换为 cos 的链接，自己测试了博客的速度，还是比较满意的。今天进入控制台看一下数据</p><p>显示外网流量 12.33 MB，请求次数 297。</p><p>腾讯云已经被扣钱了，看来很危险。</p><blockquote><p>【腾讯云】尊敬的腾讯云用户，您好。截至2023-04-13 08:30:24，您的账号（创建者账号ID：100xxx，昵称：powersee）已欠费0.05元，最新一笔扣费为COS 对象存储 结算扣费，扣费金额0.05元；轻量应用服务器-自定义镜像，对象存储，云函数SCF即将停服；轻量应用服务器-自定义镜像，对象存储停服后会继续对部分功能扣费，直至资源销毁。 您可前往“腾讯云助手”小程序查询扣费明细并快速充值，以免影响资源正常使用</p></blockquote><p>因为我的腾讯云账号里面没有余额，所以直接欠费了。欠费之后，连服务器都要给我停掉，明明我的服务器已经预付款了……</p><p>📝记录一下每天的扣费情况，注意⚠️是根据前一天的流量使用情况来扣费的。</p><table><thead><tr><th>日期</th><th>费用</th></tr></thead><tbody><tr><td>4.13</td><td>0.05</td></tr><tr><td>4.14</td><td>0.07</td></tr><tr><td>4.15</td><td>0.06</td></tr><tr><td>4.16</td><td>0.06</td></tr><tr><td>4.17</td><td>0.05</td></tr></tbody></table><p>根据后台的数据，每天的流量是 120MB 左右，每天的费用是 6 分钱左右，感觉还行，我充了一块钱进去，还能用挺多天的。如果一直保持这样，那一个月就 1.8 元。</p><p>想到既然需要按照流量以及访问次数收钱，那我还是开启防盗链吧。里面默认使用的是白名单，所以我填入这三行进去。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">powersee.github.io</span><br><span class="line">blog.powersee.top</span><br><span class="line">127.0.0.1</span><br></pre></td></tr></table></figure><p>这样我的博客、备份博客、本地调试都可以正常查看图片，如果别人搬运我的内容，或者通过 rss 订阅，就没法加载图片了。</p><p>后来想想，感觉不太好，又把防盗链给关了。</p><p><strong>试试其它的云</strong></p><p>之后我想着试试「阿里云」、「七牛云」，因为之前也有看到别人使用它们当博客图床。</p><p>但是我了解后感觉不好用。</p><p>阿里云我的账号没有免费试用的资格，甚至连像腾讯这种一块钱的体验套餐都没有，一上来就得花钱买……那既然都要花钱，我何必从腾讯云换到阿里云呢？</p><p>七牛云看着是挺好的，每个月有 10G 存储空间，给 10 万次 get 请求。所以一般个人博客使用是足够的。然而它给的链接是 HTTP 的，然后它好像提示，给的域名只有一个月而已。难道意味着如果想白嫖的话，就得每个月自己去更新一下图片域名？所以是在逼我们绑定自己的域名咯，但是域名又必须用备案的……</p><p>之后我搜到这篇文章：<a href="https://kuizuo.cn/why-i-dont-use-qiniu-cloud/">为什么我不用七牛云 - 愧怍的小站</a></p><p>作者讲到使用 HTTP 的图片在 chrome 会有问题，看来还是不要用七牛。</p><p>这里也吐槽一下，注册七年云，需要填写姓名和身份证号，注册完成后，还需要用微信小程序，人脸识别，才可以使用它的对象存储……当我做完这一切，才知道它只给 http 链接，并且域名只能用 30 天……</p><blockquote><p>七牛测试域名，每个域名每日限总流量 10GB，每个测试域名自创建起 30 个自然日后系统会自动回收，仅供测试使用</p></blockquote><p>而且我注册账号后一两个小时吧，七牛那边就打电话过来了，估计是想推广之类的，不过我说我只想拿来当博客图床，后面再敷衍几句就挂了。</p><p>然后我想着既然用不上，我把账号注销了吧，结果发现，整个网站找不到地方注销账号……总之体验很不好。</p><hr><p>目前还是继续用腾讯云 cos，先不搞， 看看腾讯云一块钱能用多久。实在不行就把图片放 vps 上，或者重新改回 GitHub pages。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在网上闲逛看到对象存储，我之前以为这东西应该是企业什么的才需要用的吧，对于我们普通个人来说，应该不太会用到。&lt;/p&gt;
&lt;p&gt;但是我对于它还是有些好奇的，然后最近一直在写博客，那我想着，要不把我博客上的图片，放到对象存储上，这样访问起来会快很多。&lt;/p&gt;
&lt;p&gt;腾讯云好像没有</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>使用 imagemagick 给图片添加阴影</title>
    <link href="https://powersee.github.io/2023/04/imagemagick-shadow/"/>
    <id>https://powersee.github.io/2023/04/imagemagick-shadow/</id>
    <published>2023-04-17T16:09:42.000Z</published>
    <updated>2023-04-23T04:09:57.408Z</updated>
    
    <content type="html"><![CDATA[<p>官方文档：<a href="https://legacy.imagemagick.org/Usage/blur/#shadow">Bluring and Sharpening – IM v6 Examples (imagemagick.org)</a></p><p>我有一张图片，名为 <code>test.jpg</code> 直接放到博客文章里面，效果是这样的</p><p><img src="/img/2023/shadow-test.jpg" alt="shadow-test"></p><p>如果加上阴影后，效果是这样的。</p><p><img src="/img/2023/convert-add-shadow.png" alt="convert-add-shadow"></p><p>看起来效果会好很多，特别是当网页背景是白色，图片背景也是白色时，加了阴影可以让图片更为突出。我使用的是这样一条命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">convert test.jpg \( +clone -background black -shadow 50x20+0+0 \) +swap -background none -layers merge +repage shadow.png</span><br></pre></td></tr></table></figure><p><code>-shadow</code> 后面的 <code>50x20+0+0</code> 指的是：</p><p>50：阴影的不透明度</p><p>20：阴影模糊度</p><p>第一个 +0：代表阴影左右偏移</p><p>第二个 +0：代表阴影上下偏移</p><p>假如我改为 <code>50x20+10+10</code>，那么得到的图片是这样的</p><p><img src="/img/2023/shadow-add10-add10.png" alt="shadow-add10-add10"></p><p>也就是阴影会往右下方偏移。</p><p>现在 <code>-background</code> 用的是 black，也可以改为其它颜色的。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">convert shadow-test.jpg \( +clone -background red -shadow 50x20+10+10 \) +swap -background none -layers merge +repage shadow.png</span><br></pre></td></tr></table></figure><p><img src="/img/2023/shadow-red.webp" alt="shadow-red"></p><p>个人感觉用 grey 会比较合适，而且我不喜欢偏移，所以这是我使用的命令。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">convert shadow-test.jpg \( +clone -background grey -shadow 70x20+0+0 \) +swap -background none -layers merge +repage shadow.png</span><br></pre></td></tr></table></figure><p><img src="/img/2023/shadow-grey-70.png" alt="shadow-grey-70"></p><p>在 Mac 上用 zsh 必须得加 \ 转义才行，在 Windows 上面就可以不用。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">convert shadow-test.jpg ( +clone -background grey -shadow 70x20+0+0 ) +swap -background none -layers merge +repage shadow.png</span><br></pre></td></tr></table></figure><p>我可以把它封装为一个函数，但是输出名字要怎么设置呢？直接在后面加 <code>.png</code> 吗？</p><p>也就是 <code>test.jpg</code> 变 <code>test.jpg.png</code>，这样一般是没问题，不过这样的命名不太好。</p><p>另一种思路，在名字后面加 <code>-shadow</code>，也就是变 <code>test-shadow.png</code></p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">shadow</span></span>() &#123;</span><br><span class="line">convert <span class="variable">$1</span><span class="string">&quot; /( +clone -background grey -shadow 70x20+0+0 /) +swap -background none -layers merge +repage &quot;</span><span class="variable">$&#123;1%.*&#125;</span><span class="string">&quot;-shadow.png</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>此时将它封装为一个函数，那么之后如果要给图片加阴影，我可以这样来使用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shadow powersee-test.jpg</span><br></pre></td></tr></table></figure><p>就可以得到一张名为 <code>powersee-test-shadow.png</code> 的带阴影图片。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官方文档：&lt;a href=&quot;https://legacy.imagemagick.org/Usage/blur/#shadow&quot;&gt;Bluring and Sharpening – IM v6 Examples (imagemagick.org)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我有一</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>解决 crontab 中执行 rsync 没有权限问题</title>
    <link href="https://powersee.github.io/2023/04/macos-crontab-not-permitted/"/>
    <id>https://powersee.github.io/2023/04/macos-crontab-not-permitted/</id>
    <published>2023-04-16T16:06:15.000Z</published>
    <updated>2023-04-23T04:09:57.336Z</updated>
    
    <content type="html"><![CDATA[<p>我在使用 rsync 备份文件到 nas 里。如果我手动在终端里执行的话，一切正常，可以把文件同步到 nas 里面。</p><p>但是，当我把同样的命令，添加到 crontab 中，却报错了。</p><p>问题其实是 cron 无法读取到 ~&#x2F;Documents&#x2F;screenshot-backup 里面的内容。因为现在 Mac 收紧了权限，其实我们平时使用一些 APP 的时候，如果要访问桌面或者下载文件夹，就会出现弹窗。</p><blockquote><p>在 macOS 中，某些应用程序在尝试读取或写入桌面、下载文件夹等敏感位置时，会触发系统的安全权限机制，导致弹出权限提示窗口。这是因为自 macOS 10.14 (Mojave) 版本开始，Apple 引入了更加严格的安全控制措施，以保护用户的隐私和数据安全。</p></blockquote><blockquote><p>除了桌面和下载文件夹之外，还有其他一些敏感位置，例如文稿、图片、文档、音乐、视频等文件夹。这些文件夹中的内容通常包含用户的个人数据和隐私信息。因此，当应用程序尝试访问这些敏感位置时，同样会触发权限提示窗口。</p></blockquote><p>那么回到我的问题，现在 cron 执行任务的时候，它可不会弹窗呀，而它又没有访问权限，所以任务就执行失败了。</p><p>方法一</p><p>不使用这个默认用户文件夹即可。例如我用户目录下有个 autosave 的文件夹，同样在 crontab 中用 rsync 备份，可以正常完成任务。</p><p>方法二</p><p>给 cron 完全磁盘权限</p><p>cron 的路径是 <code>/usr/sbin/cron</code>，我们可以在访达 Finder 里面，点击顶部菜单的「前往」「前往文件夹」，然后输入 <code>/usr/sbin</code> 来找到它。</p><p>如果想像我这样，显示隐藏文件夹，可以按快捷键 <code>command + shift + .</code>，就是 <code>&gt;</code> 这颗按键。</p><p><img src="/img/2023/cron-location-shadow.webp" alt="cron-location"></p><p>现在我们可以把 sbin 这个文件夹，拖到左侧的个人收藏那里。</p><p>然后打开「系统设置」，我的是 13.3 系统版本，以前叫「系统偏好设置」</p><p>找到 「隐私与安全性」里面的「完全磁盘访问权限」，点击下方的 + 来添加一个新的程序进去。</p><p><img src="/img/2023/full-disk-access.webp" alt="full-disk-access"></p><p>由于刚才我把 sbin 放到左侧的个人收藏了，所以现在找到 cron 很简单。</p><p><img src="/img/2023/Finder-cron.webp" alt="Finder-cron"></p><p>这样操作之后，使用 cron 来执行 rsync 命令备份Documents&#x2F;screenshot-backup 就没问题了，其它命令如果是需要访问文稿、桌面、下载这些文件夹，应该也是通过这样来解决问题的。</p><p>参考：<a href="https://apple.stackexchange.com/questions/378553/crontab-operation-not-permitted">macos - Crontab Operation not permitted - Ask Different (stackexchange.com)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我在使用 rsync 备份文件到 nas 里。如果我手动在终端里执行的话，一切正常，可以把文件同步到 nas 里面。&lt;/p&gt;
&lt;p&gt;但是，当我把同样的命令，添加到 crontab 中，却报错了。&lt;/p&gt;
&lt;p&gt;问题其实是 cron 无法读取到 ~&amp;#x2F;Document</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>tbz 如何解压</title>
    <link href="https://powersee.github.io/2023/04/tbz/"/>
    <id>https://powersee.github.io/2023/04/tbz/</id>
    <published>2023-04-15T16:06:52.000Z</published>
    <updated>2023-04-15T16:07:32.196Z</updated>
    
    <content type="html"><![CDATA[<p>可以使用 bzip2 来解压</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bzip2 -d filename.tbz</span><br></pre></td></tr></table></figure><p>然后应该会得到一个 tar 压缩包，需要再使用 tar 解压</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -xf filename.tar</span><br></pre></td></tr></table></figure><p>其实也可以直接一步到位</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -xf filename.tbz</span><br></pre></td></tr></table></figure><p>抄来一份定义</p><blockquote><p>tbz 格式是一种压缩文件格式，也称为 tarball。它是将 tar 和 bzip2 两种工具结合起来使用得到的一种格式，使用 bzip2 进行数据压缩，再使用 tar 把多个文件和目录打包在一起，最终形成一个 tbz 后缀的压缩包。</p><p>相比其他压缩格式，tbz 压缩率较高，压缩效果较优，扩展名为 .tbz 或 .tbz2，可在 Linux 和 macOS 等操作系统上使用 tar 和 bunzip2 命令对其进行解压缩。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;可以使用 bzip2 来解压&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;bzip2 -d filename.tbz&lt;/span&gt;&lt;b</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Node.js 如何复制和移动文件</title>
    <link href="https://powersee.github.io/2023/04/nodejs-copy-and-move/"/>
    <id>https://powersee.github.io/2023/04/nodejs-copy-and-move/</id>
    <published>2023-04-14T17:19:23.000Z</published>
    <updated>2023-04-23T04:09:57.371Z</updated>
    
    <content type="html"><![CDATA[<p>建议在 nodejs 的交互环境中测试，直接在终端执行 node 就可以进入。</p><p><img src="/img/2023/node-RELP.gif" alt="node-RELP"></p><h2 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h2><p>需要用到 fs</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.<span class="title function_">copyFileSync</span>(<span class="string">&#x27;a.txt&#x27;</span>, <span class="string">&#x27;b.txt&#x27;</span>)</span><br></pre></td></tr></table></figure><p>把当前目录下的 a.txt 复制为 b.txt</p><p>查询文件是否存在</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fs.<span class="title function_">existsSync</span>(<span class="string">&#x27;b.txt&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h2><p>使用 renameSync</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.<span class="title function_">renameSync</span>(<span class="string">&#x27;a.txt&#x27;</span>, <span class="string">&#x27;b/a.txt&#x27;</span>)</span><br></pre></td></tr></table></figure><p>如上，将 a.txt 移动到 b 目录下。</p><p>或者使用 rename</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123; </span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;done&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>将 one 重命名为 two</p><p>第三个参数是一个函数，这个不能缺，不像带 Sync 的，只需要两个参数就行。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;建议在 nodejs 的交互环境中测试，直接在终端执行 node 就可以进入。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/node-RELP.gif&quot; alt=&quot;node-RELP&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;复制文件&quot;&gt;&lt;a href=&quot;#复制文件&quot; clas</summary>
      
    
    
    
    
    <category term="node" scheme="https://powersee.github.io/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>如何升级 macOS 到特定版本</title>
    <link href="https://powersee.github.io/2023/04/macos-update-to-specific-version/"/>
    <id>https://powersee.github.io/2023/04/macos-update-to-specific-version/</id>
    <published>2023-04-13T16:03:06.000Z</published>
    <updated>2023-04-23T04:09:57.363Z</updated>
    
    <content type="html"><![CDATA[<p>直接在系统偏好设置里，点击「软件更新」的话，会检查当前最新的系统版本。例如我现在显示的是 Ventura。</p><p><img src="/img/2023/macOS-Monterey-Software-Update.webp" alt="macOS-Monterey-Software-Update"></p><p>而我现在的系统版本还是 Big Sur。</p><p>我其实不想更新的，所以我之前，是把「高级」里面的所有勾都取消掉，这样才可以保持这一年多来，没有任何系统升级提示。</p><p><img src="/img/2023/uncheck-macos-update.webp" alt="uncheck-macos-update"></p><p>但是刚才我点击进来了，它就自动检查更新，所以现在不更新的话，会有一个红色数字 1 在图标上。噢，不把它弄掉的话，我会相当别扭的。</p><p>我尝试着升级到 11 Big Sur 的最新版，11.7.5，看看会怎么样。</p><p><img src="/img/2023/macOS-Big-Sur-11.7.5.jpg" alt="macOS-Big-Sur-11.7.5"></p><p>升级是成功了，但是更新提示依然还在。</p><p>这时我了解到 13 版本，它的系统设置，变得和 iPad 上一样了，感觉不怎么喜欢，不知道我能否选择，只升级到 12 就行？</p><p>于是我查找看看 Mac 能否升级到特定版本。</p><p><a href="https://support.apple.com/zh-cn/HT211683">如何下载 macOS - 官方 Apple 支持 (中国)</a></p><p>直接到苹果官网，可以看到各个版本的系统，点击后跳转到 APP store。</p><p><img src="/img/2023/macOS-Monterey-app-store.webp" alt="macOS-Monterey-app-store"></p><p>商店里能下载的版本还挺多的。</p><p><a href="macappstores://apps.apple.com/app/macos-ventura/id1638787999?mt=12">Ventura 13</a></p><p><a href="macappstores://apps.apple.com/app/macos-monterey/id1576738294?mt=12">Monterey 12</a></p><p><a href="macappstores://apps.apple.com/app/macos-big-sur/id1526878132?mt=12">Big Sur 11</a></p><p><a href="macappstores://apps.apple.com/app/macos-catalina/id1466841314?mt=12">Catalina 10.15</a></p><p><a href="macappstores://apps.apple.com/app/macos-mojave/id1398502828?mt=12">Mojave 10.14</a></p><p><a href="macappstores://apps.apple.com/app/macos-high-sierra/id1246284741?mt=12">High Sierra 10.13</a></p><p>虽然知道怎么选择特定版本了，但是我在软件更新里面，已经下载好 Ventura 了。唉，那就升级看看吧，希望一切顺利。</p><p><img src="/img/2023/download-Ventura.webp" alt="download-Ventura"></p><p>等待了一段时间，升级成功了。升级后自动换了张默认壁纸，「系统偏好设置」也改名为「系统设置」了。</p><p><img src="/img/2023/system-setting.webp" alt="system-setting"></p><p>升级到 Ventura 13 居然比我刚才从 Big Sur 11.6 升级到 11.7.5 速度还快。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;直接在系统偏好设置里，点击「软件更新」的话，会检查当前最新的系统版本。例如我现在显示的是 Ventura。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/macOS-Monterey-Software-Update.webp&quot; alt=&quot;macOS-Monterey</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>如何去掉 iPhone iPad 上的越狱文件？</title>
    <link href="https://powersee.github.io/2023/04/iphone-ipad-remove-jailbreak/"/>
    <id>https://powersee.github.io/2023/04/iphone-ipad-remove-jailbreak/</id>
    <published>2023-04-12T16:05:27.000Z</published>
    <updated>2023-04-23T04:09:57.393Z</updated>
    
    <content type="html"><![CDATA[<p>我有一台 iPad，几年前就将它越狱了。由于越狱之后，就没法直接更新系统，所以目前还停留在 13.6.1</p><p><img src="/img/2023/iPad-13.6.1.jpg" alt="iPad-13.6.1"></p><p>现在提示可以更新的是 iPadOS 16.4.1，如果我直接点击升级，很可能待会就变砖了。</p><p>所以我开始了解怎么才能升级这台，已经越狱了的 iPad。我猜可能得进入 DFU 模式，然后重新刷一个干净的系统进去。</p><p>不过了解后发现，并不用这么麻烦，只需要先把系统的越狱去掉就行。</p><p>先在电脑上使用 checkra1n 让机器处于越狱状态，因为我们需要在设备里打开 checkra1n 这个 app。</p><p>官网：<a href="https://checkra.in/">checkra1n</a></p><p><img src="/img/2023/checkra1n-v-0.12.4.webp" alt="checkra1n-v-0.12.4"></p><p>还是熟悉的操作，按照说明进入 DUF 模式，之后机器重启，然后点击桌面的 checkra1n 这个 app，再点击红色的「Restore System」来恢复系统即可。</p><p><img src="/img/2023/iPad-checkra1n.png" alt="iPad-checkra1n"></p><p>然后机器会重启，并且删除越狱相关的文件。例如重启后桌面就没有 Cydia 了。</p><p>此时就可以到系统里面升级了，经过漫长地等待，我把 iPad 升级到了 16.4.1</p><p><img src="/img/2023/iPad-16.4.1.jpg" alt="iPad-16.4.1"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我有一台 iPad，几年前就将它越狱了。由于越狱之后，就没法直接更新系统，所以目前还停留在 13.6.1&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2023/iPad-13.6.1.jpg&quot; alt=&quot;iPad-13.6.1&quot;&gt;&lt;/p&gt;
&lt;p&gt;现在提示可以更新的是 iPa</summary>
      
    
    
    
    
    <category term="iOS" scheme="https://powersee.github.io/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>自动操作 automator 出现输入框后再运行脚本</title>
    <link href="https://powersee.github.io/2023/04/automator-input-box/"/>
    <id>https://powersee.github.io/2023/04/automator-input-box/</id>
    <published>2023-04-11T16:13:21.000Z</published>
    <updated>2023-04-23T04:09:57.335Z</updated>
    
    <content type="html"><![CDATA[<p>由于我每天都写一篇博客文章，每次都需要我打开 vscode，然后在终端里面输入</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new post title...</span><br></pre></td></tr></table></figure><p>我在想，能否使用 automator 让我这个过程变得更加流畅一些。</p><p>我的想法是，在 Mac 右上角，放一个图标，我点击图标后，弹出一个文本框，然后我输入文章名字，例如今天这篇的名字是 <code>automator-input-box</code></p><p>输入完成之后，后台就自动执行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new post automator-input-box</span><br></pre></td></tr></table></figure><p>感觉还是挺简单的，应该是可以实现的。</p><p>一番研究之后，终于实现了。</p><p><img src="/img/2023/automator-hexo-post.webp" alt="automator-hexo-post"></p><p>脚本内容</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="variable">$HOME</span>/.zshrc</span><br><span class="line"><span class="comment">#echo $PATH</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$HOME</span>/hexobackup &amp;&amp; <span class="built_in">pwd</span></span><br><span class="line">hexo new post <span class="variable">$1</span></span><br></pre></td></tr></table></figure><p>首先放一个 「获得指定的文本」在最上面，然后下面是「运行Shell脚本」</p><p>第一行加载 <code>zsh</code> 的配置，是为了获取到 <code>node</code> 和 <code>hexo</code> 的环境变量，如果不加这一行，那么脚本运行的时候，它是找不到 <code>hexo</code> 的。当然我们也可以写出 <code>hexo</code> 的完整路径，例如 <code>/opt/homebrew/.../hexo</code> 之类，但是我发现这样会提示找不到 <code>node</code>，又得加 <code>node</code> 的环境变量。所以还是直接加载 <code>zsh</code> 的配置文件比较方便。</p><p>之后进入 <code>hexo</code> 博客所在的位置，我的是放在用户目录下的 <code>hexobackup</code> 中，所以可以写成 <code>$HOME/hexobackup</code></p><p>进入到博客目录之后，再执行命令创建文章。</p><p>本来到这里就结束了的，不过我后面还是加了些内容，让结果可以通过通知显示出来。</p><p>这里的关键点是设置一个变量，来接收输出结果，然后在显示通知里面，使用这个变量。</p><p>我创建的是「应用程序」，所以可以选择把它保存到自己想放置的地方。</p><p><img src="/img/2023/automator-APP.webp" alt="automator-APP"></p><p>之后我把这个 APP 拖到 Dock 栏上面，可以非常快速地打开它。</p><p><img src="/img/2023/hexo-post-dock.webp" alt="hexo-post-dock"></p><p>点击它之后，就会出现一个文本框，在这里我可以输入博客文章的文件名。不过它这里不能粘贴，只能手动输入。</p><p><img src="/img/2023/automator-input-box-getText.webp" alt="automator-input-box-getText"></p><p>当我输入完成后，点击「继续」按钮，就会去执行 shell 脚本。完成之后，会弹出一条通知。</p><p><img src="/img/2023/hexo-post-notification.webp" alt="hexo-post-notification"></p><p>感觉比较遗憾的地方是，不能粘贴，以及只能按「继续」按钮，而不能用按回车键来代替。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;由于我每天都写一篇博客文章，每次都需要我打开 vscode，然后在终端里面输入&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo </summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>自动操作 automator 快速将图片转为 webp</title>
    <link href="https://powersee.github.io/2023/04/automator-quick-webp/"/>
    <id>https://powersee.github.io/2023/04/automator-quick-webp/</id>
    <published>2023-04-10T16:16:29.000Z</published>
    <updated>2023-04-23T04:09:57.335Z</updated>
    
    <content type="html"><![CDATA[<p>最近在学习 Mac 上面的自动操作 automator 怎么使用。</p><p>bilibili 上面有一个非常好的教程视频：<a href="https://www.bilibili.com/video/BV1ps411J7gW">https://www.bilibili.com/video/BV1ps411J7gW</a></p><p>是 2018 年录制的，不过讲得挺好的，我可以学习学习他的教学方式。</p><p>不过他的视频中，没讲到我想了解的，执行 shell 命令。</p><p>我有这样的需求，需要经常把图片转换为 WebP 格式。然后我了解到用 automator 可以更快地做到，因此打算来研究看看。</p><p>一番折腾之后，终于弄好了，现在可以使用右键来将图片转为 WebP 格式了。</p><p>过程如下：</p><p>打开 Mac 自带的应用「自动操作」英文名是 automator，选择第三个「快速操作」。然后在左边的「实用工具」里面，找到「运行 Shell 脚本」，将它拖到右边。</p><p>右边我们有很多地方需要调整，可以参考我的设置↓</p><p><img src="/img/2023/automator-webp.webp" alt="automator-webp"></p><p>这是脚本内容</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$f</span>&quot;</span></span><br><span class="line">/opt/homebrew/bin/cwebp <span class="string">&quot;<span class="variable">$1</span>&quot;</span> -o <span class="string">&quot;<span class="variable">$&#123;1%.*&#125;</span>.webp&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>虽然它使用了 for，但是我测试过，选中两张图片的时候，只有第一张能否转为 WebP，第二张不会。</p><p>完成之后保存一下即可，接着来到访达里面。</p><p>使用过程如下：</p><p>选中图片，右键「快速操作」，「转换为 WebP」这个名字是我们自己起的。然后旁边就多出一张 webp 格式的图片了。</p><p><img src="/img/2023/automator-quick-webp.gif" alt="automator-quick-webp"></p><p>然后根据我的了解，从 macOS 10.15（Catalina）开始，Apple 更改了 Automator 创建的服务的默认位置，将其移动到了右键菜单的「快速操作」下。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近在学习 Mac 上面的自动操作 automator 怎么使用。&lt;/p&gt;
&lt;p&gt;bilibili 上面有一个非常好的教程视频：&lt;a href=&quot;https://www.bilibili.com/video/BV1ps411J7gW&quot;&gt;https://www.bilibil</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
</feed>
