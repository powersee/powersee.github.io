<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Powersee的博客</title>
  
  
  <link href="https://powersee.github.io/atom.xml" rel="self"/>
  
  <link href="https://powersee.github.io/"/>
  <updated>2024-09-08T15:05:09.792Z</updated>
  <id>https://powersee.github.io/</id>
  
  <author>
    <name>powersee</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>写 markdown 时中英文切换频繁？Mac 版搜狗输入法的解决方案</title>
    <link href="https://powersee.github.io/2024/09/mac-sougou-zh-en/"/>
    <id>https://powersee.github.io/2024/09/mac-sougou-zh-en/</id>
    <published>2024-09-08T14:51:44.000Z</published>
    <updated>2024-09-08T15:05:09.792Z</updated>
    
    <content type="html"><![CDATA[<p>从我了解 markdown 距今也好几年了，目前主力的笔记工具，是付费软件 Typora，它默认新建的文档，就是 md 结尾的 markdown 文件。</p><p>这种语言给文本设置格式的时候，得使用英文的标点符号。因此经常需要按 shift 键来切换中英状态。</p><p>比如说，我现在用中文打字中，然后需要用到引用块，那么需要打出 &gt; 这个符号，因此需要先切换为英文，打出大于号 &gt; 然后再切换回中文，继续打字。</p><p>不过目前我找到了一个还不错的解决方案——「让输入法在中文状态下，某些按键打出的是英文标点符号」。</p><p>其实直接在中文状态下，使用全英文标点符号，是最简单的解决方案。但是我不打算用这种，因为平时常用的逗号和句号这些，还是用中文的全角符号，看起来比较美观。</p><p>平时我常用的格式，就是一二三级标题，手动输入是 <code>#</code>，不过我很少手动，设置标题用快捷键就行。cmd + 1 这样。</p><p>还有就是 <code>代码</code> 和</p><blockquote><p>引用</p></blockquote><p>这两种格式，我之前一般都是切换到英文状态下，来输入 <code>`</code> 和 <code>&gt;</code> 的。</p><p>而现在，我不需要按 shift 键来切换了。因为在 Mac 的搜狗输入法里，有一个「符号替换」功能。</p><p><img src="/img/2024/Punctuation-replace.webp" alt="Punctuation-replace"></p><p>里面默认就有几条规则，我们可以点击左下角的 + 来新建规则。</p><p><img src="/img/2024/replace-2.jpg" alt="replace-2"></p><p>它会出现两个输入框，第一个只能用英文输入法来输入字符，第二个就可以用中文。</p><p>我是这么操作的：</p><ol><li>第一个框，按一下波浪键，第二个框，切换到英文状态，按一下波浪键。</li><li>第一个框，按 shift + 大于号键，也就是输入一个大于号。第二个框，切换到英文状态，同样输入一个大于号 &gt;。</li></ol><p>然后就 OK 了。</p><p>其实我觉得它这里的逻辑是可以优化一下的，让第一个框，也可以输入中文标点，会比较直观一些。</p><p>这样操作之后呢，我就没法打出 <code>》</code> 这个右书名号了。不过不重要，我基本没怎么使用过这个符号。</p><p>如果真要打出来，也是可以的，按快捷键 <code>Ctrl + shift + e</code> 就可以呼出「符号菜单」，在里面找就行。</p><p><img src="/img/2024/mac-sougou-fuhao.webp" alt="mac-sougou-fuhao"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;从我了解 markdown 距今也好几年了，目前主力的笔记工具，是付费软件 Typora，它默认新建的文档，就是 md 结尾的 markdown 文件。&lt;/p&gt;
&lt;p&gt;这种语言给文本设置格式的时候，得使用英文的标点符号。因此经常需要按 shift 键来切换中英状态。&lt;/p&gt;</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Typora Mac 版本如何打开开发人员工具？</title>
    <link href="https://powersee.github.io/2024/08/typora-macos-debug/"/>
    <id>https://powersee.github.io/2024/08/typora-macos-debug/</id>
    <published>2024-08-18T08:56:04.000Z</published>
    <updated>2024-08-18T08:56:43.098Z</updated>
    
    <content type="html"><![CDATA[<p>目前我 Mac 上的 Typora 已经升级到了 1.9.4 版本，现在我找不到调出「开发人员工具」的地方。</p><p>以前的版本，我记得在设置里面，勾选上开发工具，然后在编辑页面右键就行，现在没有了。</p><p>目前新版本，需要通过 Safari 才行。</p><p>先打开 Typora，然后打开 Safari 浏览器，点击上方的「开发」，第三行就是我们机器的名字和系统版本，鼠标放上去，就可以在右边看到 Typora。</p><p><img src="/img/2024/Safari-debug-Typora.webp" alt="Safari-debug-Typora"></p><p>我这里在 Typora 打开了 3 个文档，所以这里有 3 个选项，鼠标放到对应选项时，后面的文档会高亮起来。</p><p><img src="/img/2024/Typora-debug.webp" alt="Typora-debug"></p><p>点击之后就可以打开对应文档的「开发人员工具」了。</p><p>参考：<a href="https://support.typoraio.cn/Debug-Themes/">Debug Themes &#x2F; CSS - Typora Support</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;目前我 Mac 上的 Typora 已经升级到了 1.9.4 版本，现在我找不到调出「开发人员工具」的地方。&lt;/p&gt;
&lt;p&gt;以前的版本，我记得在设置里面，勾选上开发工具，然后在编辑页面右键就行，现在没有了。&lt;/p&gt;
&lt;p&gt;目前新版本，需要通过 Safari 才行。&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Windows 10 无法连接上 Xbox 手柄</title>
    <link href="https://powersee.github.io/2024/08/xbox-controller-remove-failed/"/>
    <id>https://powersee.github.io/2024/08/xbox-controller-remove-failed/</id>
    <published>2024-08-16T17:33:51.000Z</published>
    <updated>2024-08-16T17:35:09.537Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/img/2024/xbox-controller-keling.webp" alt="xbox-controller-keling"></p><p>又一次被这个 Xbox 手柄折磨了。</p><p>原本这个手柄在我的 win10 台式机上面，是可以正常使用的。然而前段时间，我拿另外一台电脑，通过蓝牙连接这个手柄。</p><p>手柄好像认了新电脑当主人之后，就连接不上旧电脑了。</p><p>那按理来说，我把手柄和旧电脑，重新匹配一下就好呗。然而事情没有这么简单。</p><p><img src="/img/2024/xbox-controller-remove-failed.png" alt="xbox-controller-remove-failed"></p><p>因为我在 Windows 的蓝牙设置里，没法删掉 Xbox 手柄。点击删除设备会提示「删除失败」。</p><p>而不删除的话，我让手柄进入配对模式，此时电脑是搜索不到手柄的，也就没法连接了。</p><h3 id="尝试方案一"><a href="#尝试方案一" class="headerlink" title="尝试方案一"></a>尝试方案一</h3><p>打开「设备管理器」，把上方的「查看」里面的「显示隐藏的设备」勾选上。</p><p>然后把里面的蓝牙设备都卸载掉。</p><p>我这边卸载后，还是没法连接上手柄。</p><h3 id="尝试方案二"><a href="#尝试方案二" class="headerlink" title="尝试方案二"></a>尝试方案二</h3><p>安装一个蓝牙命令行工具 <a href="https://bluetoothinstaller.com/bluetooth-command-line-tools">Bluetooth command line tools</a></p><p>安装这个主要为了使用 btpair 这个命令，网页上对它的介绍是</p><blockquote><p>Performs pairing with remote bluetooth devices.<br>与远程蓝牙设备进行配对。</p></blockquote><p>不过这个软件好像有点老了，最新的版本距今也接近 12 年。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Version history</span><br><span class="line">1.2.0.56 Nov 2, 2012</span><br><span class="line">Minor improvements and new featues in btconfig, btpair and bcom</span><br><span class="line">Windows 8 support.</span><br></pre></td></tr></table></figure><p>看到它这么久没更新了，我其实是有些怀疑的，老软件到底能不能解决新机器的问题呢？</p><p>最终实测是有效果，从官网下载并安装 <code>BluetoothCLTools-1.2.0.56.exe</code>，然后打开 powershell，执行 <code>btpair -u</code>，删除所有匹配过的蓝牙设备。</p><p>之后的我手柄进入匹配模式，电脑搜索蓝牙信号，就可以搜索到，然后成功连接上了。</p><p>这不是我第一次被蓝牙连接 xbox 手柄所困扰，我相信也不会是最后一次。我记得上次我是在设备管理器里面，删除 Microsoft 开头的蓝牙设备后，就可以连接手柄了。</p><p>但是这次不行，所以我找到新的方法，也成功解决了问题。这里我就把过程记录下来，希望后面其他玩家遇到同样的问题时，可以搜索到吧。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/img/2024/xbox-controller-keling.webp&quot; alt=&quot;xbox-controller-keling&quot;&gt;&lt;/p&gt;
&lt;p&gt;又一次被这个 Xbox 手柄折磨了。&lt;/p&gt;
&lt;p&gt;原本这个手柄在我的 win10 台式机上面，是可以</summary>
      
    
    
    
    
    <category term="Windows" scheme="https://powersee.github.io/tags/Windows/"/>
    
    <category term="Xbox" scheme="https://powersee.github.io/tags/Xbox/"/>
    
  </entry>
  
  <entry>
    <title>Windows 11 资源管理器的地址栏消失了</title>
    <link href="https://powersee.github.io/2024/08/windows11-address-bar-missing/"/>
    <id>https://powersee.github.io/2024/08/windows11-address-bar-missing/</id>
    <published>2024-08-16T05:21:46.000Z</published>
    <updated>2024-08-16T05:24:10.731Z</updated>
    
    <content type="html"><![CDATA[<p>最近打开一台很久没开机的 win11 电脑，使用了一下，然后系统提示更新。</p><p>等它更新完成之后，我打开资源管理器，发现地址栏不见了。</p><p><img src="/img/2024/startallback-win7.webp" alt="startallback-win7"></p><p>看来应该和这次更新有关，网上搜索一下，有网友也遇过这样的问题，他的解决方案是，到设置里面回滚更新，好像可以退回到更新前的状态。</p><p>不过我不想这么做，继续了解，有人讲到是电脑安装 StartAllBack 这个软件导致的。需要在软件的设置里面，把「资源管理器样式」改回 Win11 就行。</p><p>（提醒一下，StartAllBack 这个软件安装后，是没有 APP 图标的，想要再次进入软件的设置界面，需要把鼠标放在「开始菜单」的位置，然后右键，选择「属性」。）</p><p><img src="/img/2024/startallback-win11.webp" alt="startallback-win11"></p><p>果然如此，我改回 Win11 之后，资源管理器的地址栏就再次出现了。</p><p><img src="/img/2024/win11-explorer-ok.webp" alt="win11-explorer-ok"></p><p>不过这个问题其实也可以通过，更新 StartAllBack 的软件版本来解决，新版本依然可以使用 win10 的样式。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近打开一台很久没开机的 win11 电脑，使用了一下，然后系统提示更新。&lt;/p&gt;
&lt;p&gt;等它更新完成之后，我打开资源管理器，发现地址栏不见了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2024/startallback-win7.webp&quot; alt=&quot;startall</summary>
      
    
    
    
    
    <category term="Windows" scheme="https://powersee.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Nu shell 的自定义命令（函数）笔记</title>
    <link href="https://powersee.github.io/2024/08/nu-shell-def/"/>
    <id>https://powersee.github.io/2024/08/nu-shell-def/</id>
    <published>2024-08-12T15:39:09.000Z</published>
    <updated>2024-08-12T15:44:17.423Z</updated>
    
    <content type="html"><![CDATA[<p>由于我经常使用 yt-dlp 来下载视频或者音频，所以之前已经给 nu shell 添加了 alias，把 yt-dlp 缩短为 yt。</p><p>但是我平时喜欢把音频，直接下载到一个特定的目录里面。所以使用命令行，我需要先 cd xxxx，然后再执行 yt xxxx。</p><p>在 Mac 上面我使用的是 zsh，所以写一条 alias</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias ya=&quot;cd xxxx &amp;&amp; yt-dlp --format &#x27;bestaudio[ext!=webm]&#x27;&quot;</span><br></pre></td></tr></table></figure><p>然后平时就执行 ya url，就可以下载到 url 对应的音频了。</p><p>但是我发现，在 nu shell 这边的 alias，没法这么用，即使我已经知道它不能使用 <code>&amp;&amp;</code>，得使用 <code>;</code> 才对。</p><p>在这边我也是折腾了不少时间，使用 alias 应该是没法达到我的目的了。</p><p>所以我寻找其它的方法——<a href="https://www.nushell.sh/zh-CN/book/custom_commands.html">自定义命令 | Nushell</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def yda [url:string] &#123;</span><br><span class="line">    cd &#x27;D:/xxx&#x27;</span><br><span class="line">    yt-dlp --format &#x27;bestaudio[ext!=webm]&#x27; $url</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最终就是写了一个函数，这样我们在 shell 里面执行 yda 后面需要一个参数。持久化的方法，我也是同样写到 env.nu 里面。</p><p><img src="/img/2024/nu-shell-yda.png" alt="nu-shell-yda"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;由于我经常使用 yt-dlp 来下载视频或者音频，所以之前已经给 nu shell 添加了 alias，把 yt-dlp 缩短为 yt。&lt;/p&gt;
&lt;p&gt;但是我平时喜欢把音频，直接下载到一个特定的目录里面。所以使用命令行，我需要先 cd xxxx，然后再执行 yt xxxx。</summary>
      
    
    
    
    
    <category term="Windows" scheme="https://powersee.github.io/tags/Windows/"/>
    
    <category term="shell" scheme="https://powersee.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Nu shell 的 alias （别名）笔记</title>
    <link href="https://powersee.github.io/2024/08/nu-shell-alias/"/>
    <id>https://powersee.github.io/2024/08/nu-shell-alias/</id>
    <published>2024-08-11T15:54:55.000Z</published>
    <updated>2024-08-12T15:41:55.993Z</updated>
    
    <content type="html"><![CDATA[<p>平时在 Mac 和 Linux 上面，我挺喜欢使用 alias 的，可以节省我执行命令的时间。</p><p>Windows 上面，我还是用不惯 powershell 和 cmd，所以我在上面安装了 nu shell，并且把它设置为默认的 shell，打开终端 APP 的时候，就会启动 nu shell。</p><p><img src="/img/2023/nushell-ls.png"></p><p>在比较简单的情况下，它的 alias 和 bash 的差不多。</p><p>此处可以参考官方文档：<a href="https://www.nushell.sh/zh-CN/book/aliases.html">别名 | Nushell</a></p><p>例如我就把 yt-dlp 缩短为 yt</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> $ alias yt = yt-dlp</span><br><span class="line"> $ yt-dlp --version                     </span><br><span class="line">2024.08.01</span><br><span class="line"> $ yt --version </span><br><span class="line">2024.08.01</span><br></pre></td></tr></table></figure><p>不过里面说，想要持久化，可以添加到你的 config.nu 文件中。</p><p>我没有这么做，我直接写入到 env.nu 中了，直接把 env.nu 当成 .zshrc 来看待了。</p><p>如果只是简单地缩短命令，那么了解到这里就足够了。</p><p>不过使用稍微深一点，就还是容易遇到问题。</p><h3 id="首先是命令的拼接"><a href="#首先是命令的拼接" class="headerlink" title="首先是命令的拼接"></a>首先是命令的拼接</h3><p>在 bash 上面我们可以使用 &amp;&amp; 来连接两条命令。不过在 nu 这边不行，这点我们可以参考官方的这篇文档 <a href="https://www.nushell.sh/zh-CN/book/coming_from_bash.html">从 Bash 到 Nu | Nushell</a>，这里面可以了解到 bash 上面的 &amp;&amp;，在 nu shell 里是使用 <code>;</code></p><h3 id="然后是-Windows-切换盘符"><a href="#然后是-Windows-切换盘符" class="headerlink" title="然后是 Windows 切换盘符"></a>然后是 Windows 切换盘符</h3><p>我们平时启动 shell 之后，默认是在 C 盘的用户目录下，此时如果想切换到 D 盘。</p><p>那么在 cmd 和 powershell，我们只需要执行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">D:</span><br></pre></td></tr></table></figure><p>就可以切换过去。但是在 nu 这边不行，得加多一个 \</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">D:\</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;平时在 Mac 和 Linux 上面，我挺喜欢使用 alias 的，可以节省我执行命令的时间。&lt;/p&gt;
&lt;p&gt;Windows 上面，我还是用不惯 powershell 和 cmd，所以我在上面安装了 nu shell，并且把它设置为默认的 shell，打开终端 APP 的时</summary>
      
    
    
    
    
    <category term="Windows" scheme="https://powersee.github.io/tags/Windows/"/>
    
    <category term="shell" scheme="https://powersee.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>本地部署开源语音转文字模型 SenseVoice</title>
    <link href="https://powersee.github.io/2024/08/SenseVoice/"/>
    <id>https://powersee.github.io/2024/08/SenseVoice/</id>
    <published>2024-08-08T13:39:15.000Z</published>
    <updated>2024-08-08T13:40:25.285Z</updated>
    
    <content type="html"><![CDATA[<p>阿里的语音转文字模型 <a href="https://github.com/FunAudioLLM/SenseVoice/">https://github.com/FunAudioLLM/SenseVoice/</a></p><p>听说比 openai 的 Whisper 效果好，既然是开源的，那就下载来试试看吧。</p><ul><li><p>这个可以用 CPU 来运行，所以没有显卡也能用。</p></li><li><p>对电脑系统要求有 python 和 ffmpeg。</p></li></ul><p>首先把代码克隆到本地</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/FunAudioLLM/SenseVoice.git</span><br></pre></td></tr></table></figure><p>然后安装依赖</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>完成后启动 webui 就可以使用了</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python webui.py</span><br></pre></td></tr></table></figure><p><img src="/img/2024/sensevoice-webui.webp" alt="sensevoice-webui"></p><p>一般运行之后，会给我们一个地址 <a href="http://127.0.0.1:7860/">http://127.0.0.1:7860</a> 打开浏览器访问它，然后上传音频上去，语言可以选择一下，这样可以更快速转换，再点击一下 「start」按键就可以了。</p><p>我使用的是 Mac mini，观察了一下，使用时占用内存 1.6GB，点击 start 后开始转换，主要是 CPU 占用增加，GPU 好像没变化，转换时内存占用会提高到 2.6GB。</p><p>速度确实挺快的，三分钟的音频，6 秒就转换好了。这点可以从终端看到。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">time_speech:  185.867, time_escape: 6.026: 100%</span><br></pre></td></tr></table></figure><p>后面又尝试了一段 57 分钟的音频，耗时不到两分钟</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">time_speech:  3461.120, time_escape: 113.743: 100%</span><br></pre></td></tr></table></figure><p>注意，安装的依赖比较占用空间</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch&lt;=2.3</span><br><span class="line">torchaudio</span><br><span class="line">modelscope</span><br><span class="line">huggingface</span><br><span class="line">huggingface_hub</span><br><span class="line">funasr&gt;=1.1.3</span><br><span class="line">numpy&lt;=1.26.4</span><br><span class="line">gradio</span><br><span class="line">fastapi&gt;=0.111.1</span><br></pre></td></tr></table></figure><p>建议创建 python 虚拟环境，专门给它使用。</p><p>我这边 venv 目录占用了 883 MB。</p><p>目前好像就开源了这个 small 模型，我们好像也不能切换其它模型，不过我感觉转换的质量还不错，所以以后在 Mac 上我就使用它来语音转文字了，Windows 上面我还是会继续使用 Whisper。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;阿里的语音转文字模型 &lt;a href=&quot;https://github.com/FunAudioLLM/SenseVoice/&quot;&gt;https://github.com/FunAudioLLM/SenseVoice/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;听说比 openai 的 Whispe</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Ollama 更改模型存放位置</title>
    <link href="https://powersee.github.io/2024/08/ollama-models-path/"/>
    <id>https://powersee.github.io/2024/08/ollama-models-path/</id>
    <published>2024-08-05T05:09:48.000Z</published>
    <updated>2024-08-05T05:13:31.723Z</updated>
    
    <content type="html"><![CDATA[<p>想要改它的存放位置，我们需要进入环境变量。</p><p>打开 Windows 系统设置，来到【关于】，在右边找到【高级系统设置】，然后会出现一个【系统属性】窗口。</p><p>在上面的标签里选择【高级】，再点击下方的【环境变量】。</p><p>这时弹出一个【环境变量】窗口，点击【系统变量】下的新建，然后又弹出一个窗口。</p><p>变量名：OLLAMA_MODELS</p><p>变量值：D:\AI\Ollama</p><p>然后一个一个确定，就添加好环境变量了。</p><p><img src="/img/2024/Ollama-env-model.webp" alt="Ollama-env-model"></p><p>那怎么知道环境变量有没有生效呢？直接重启电脑肯定可以。</p><p>不过也有快速的方法，我们打开 cmd，然后执行一个命令 set ，它就会输出所有的环境变量，找找看有没有我们刚才添加的 OLLAMA_MODELS 就行。</p><p><img src="/img/2024/cmd-ollama-env.webp" alt="cmd-ollama-env"></p><p>这时候再执行  run 或者 pull 命令来拉去模型，就会存放在 D 盘了。</p><p>那如果我之前已经下载过模型，存放在 C 盘里面了呢？怎么迁移到 D 盘？</p><p>很简单，将 C 盘的用户目录下的 .ollama 中的两个文件夹，移动到 D 盘我们新设置的存放路径就行。</p><p>迁移之后，可以使用 ollama list 来检查</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Users\x&gt;ollama list</span><br><span class="line">NAME            ID              SIZE    MODIFIED</span><br><span class="line">qwen2:1.5b      f6daf2b25194    934 MB  11 hours ago</span><br><span class="line">gemma2:latest   ff02c3702f32    5.4 GB  46 hours ago</span><br><span class="line">qwen2:latest    e0d4e1163c58    4.4 GB  47 hours ago</span><br><span class="line">qwen2:0.5b      6f48b936a09f    352 MB  2 days ago</span><br><span class="line">llama3.1:latest 62757c860e01    4.7 GB  2 days ago</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;想要改它的存放位置，我们需要进入环境变量。&lt;/p&gt;
&lt;p&gt;打开 Windows 系统设置，来到【关于】，在右边找到【高级系统设置】，然后会出现一个【系统属性】窗口。&lt;/p&gt;
&lt;p&gt;在上面的标签里选择【高级】，再点击下方的【环境变量】。&lt;/p&gt;
&lt;p&gt;这时弹出一个【环境变量】</summary>
      
    
    
    
    
    <category term="AI" scheme="https://powersee.github.io/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>在 B 站网页版显示用户 IP 归属地</title>
    <link href="https://powersee.github.io/2024/05/bilibili-web-user-ip/"/>
    <id>https://powersee.github.io/2024/05/bilibili-web-user-ip/</id>
    <published>2024-05-21T04:58:12.000Z</published>
    <updated>2024-05-21T04:59:08.855Z</updated>
    
    <content type="html"><![CDATA[<p>目前使用「哔哩哔哩」的手机客户端，可以显示用户的 IP 属地。（不过用谷歌商店的「bilibili」国际版不能显示）</p><p>最近无意间发现一个油猴脚本 <a href="https://greasyfork.org/zh-CN/scripts/466815-%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E7%BD%91%E9%A1%B5%E7%89%88%E5%B1%95%E7%A4%BA-ip-%E5%B1%9E%E5%9C%B0">哔哩哔哩网页版展示 IP 属地</a></p><p>安装之后在网页端也可以显示用户的 IP 属地了，效果如下图。</p><p><img src="/img/2024/bilibili-ip-web-preview.webp" alt="preview"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;目前使用「哔哩哔哩」的手机客户端，可以显示用户的 IP 属地。（不过用谷歌商店的「bilibili」国际版不能显示）&lt;/p&gt;
&lt;p&gt;最近无意间发现一个油猴脚本 &lt;a href=&quot;https://greasyfork.org/zh-CN/scripts/466815-%E5%</summary>
      
    
    
    
    
    <category term="网络" scheme="https://powersee.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>Mac 邮件 APP 老是自动退出，分享我的解决方案</title>
    <link href="https://powersee.github.io/2024/05/mac-mail-app-check/"/>
    <id>https://powersee.github.io/2024/05/mac-mail-app-check/</id>
    <published>2024-05-18T13:08:56.000Z</published>
    <updated>2024-05-18T13:09:27.624Z</updated>
    
    <content type="html"><![CDATA[<p>不知道是不是内存不够的原因，Mac 上面的「邮件」APP 老是自动退出，这就有点难受了，我没法及时收到邮件呀。</p><p>目前我的解决方案是，通过一个定时脚本，每个小时运行一次，检查一下「邮件」APP 是否在运行，如果不是，就打开运行。</p><p>下面是脚本内容。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># 检查邮件应用程序是否在运行</span><br><span class="line">if ! pgrep -x &quot;Mail&quot; &gt; /dev/null</span><br><span class="line">then</span><br><span class="line">    echo &quot;Mail app is not running. Starting Mail app...&quot;</span><br><span class="line">    open -a &quot;Mail&quot;</span><br><span class="line">    sleep 5  # 等待邮件应用程序完全启动</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line">    echo &quot;Mail app is already running.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>我把它写到 <code>$HOME/code/check_mail.sh</code> 里面，然后赋予它执行权限。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chmod +x $HOME/code/check_mail.sh</span><br></pre></td></tr></table></figure><p>之后 crontab 里面添加这一行内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">8 * * * * $HOME/code/check_mail.sh &gt;&gt; /tmp/check-mail.log</span><br></pre></td></tr></table></figure><p>这样每个小时的第 8 分钟，脚本就会运行一次。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;不知道是不是内存不够的原因，Mac 上面的「邮件」APP 老是自动退出，这就有点难受了，我没法及时收到邮件呀。&lt;/p&gt;
&lt;p&gt;目前我的解决方案是，通过一个定时脚本，每个小时运行一次，检查一下「邮件」APP 是否在运行，如果不是，就打开运行。&lt;/p&gt;
&lt;p&gt;下面是脚本内容。&lt;</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>记一次清理 /var/lib/docker/</title>
    <link href="https://powersee.github.io/2024/04/clean-var-lib-docker/"/>
    <id>https://powersee.github.io/2024/04/clean-var-lib-docker/</id>
    <published>2024-04-27T03:24:44.000Z</published>
    <updated>2024-04-27T03:25:16.495Z</updated>
    
    <content type="html"><![CDATA[<p>最近发现服务器的可用空间又变零了，使用 ncdu 扫描一下全盘，发现还是 docker 占用的空间最多。</p><p>于是得来清理一下。</p><p>使用 docker 的内置命令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker system df        </span><br><span class="line">TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE</span><br><span class="line">Images          7         7         1.49GB    0B (0%)</span><br><span class="line">Containers      7         6         14.61MB   0B (0%)</span><br><span class="line">Local Volumes   2         2         219.1MB   0B (0%)</span><br><span class="line">Build Cache     63        0         1.089GB   1.089GB</span><br></pre></td></tr></table></figure><p>我这里找到了 1GB 多的构建缓存，我打算把它清除掉。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker builder prune</span><br></pre></td></tr></table></figure><p>清除完成后，再来看一下。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker system df    </span><br><span class="line">TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE</span><br><span class="line">Images          7         7         1.49GB    0B (0%)</span><br><span class="line">Containers      7         6         14.61MB   0B (0%)</span><br><span class="line">Local Volumes   2         2         219.1MB   0B (0%)</span><br><span class="line">Build Cache     1         0         0B        0B</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近发现服务器的可用空间又变零了，使用 ncdu 扫描一下全盘，发现还是 docker 占用的空间最多。&lt;/p&gt;
&lt;p&gt;于是得来清理一下。&lt;/p&gt;
&lt;p&gt;使用 docker 的内置命令&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;tab</summary>
      
    
    
    
    
    <category term="Linux" scheme="https://powersee.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>使用 AppleScript 控制键盘按键</title>
    <link href="https://powersee.github.io/2024/04/mac-applescript-keyboard-control/"/>
    <id>https://powersee.github.io/2024/04/mac-applescript-keyboard-control/</id>
    <published>2024-04-26T13:39:37.000Z</published>
    <updated>2024-04-26T13:43:18.341Z</updated>
    
    <content type="html"><![CDATA[<p>macOS 有一个自带的 APP 叫「脚本编辑器」，我想使用它，来实现每三秒就按一下方向键右→</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">repeat</span><br><span class="line">tell application &quot;System Events&quot;</span><br><span class="line">key code 124</span><br><span class="line">end tell</span><br><span class="line">delay 3</span><br><span class="line">end repeat</span><br></pre></td></tr></table></figure><p><img src="/img/2024/applescript-key.webp" alt="applescript-key"></p><p>此时如果点击右上角的三角形图标 ▶，应该会报错。</p><blockquote><p>“System Events”遇到一个错误：“脚本编辑器”不允许发送按键。</p></blockquote><p>需要给它控制电脑的权限才行。在辅助功能里面，找到「脚本编辑器」然后打开，找不到可以像我这样直接搜索。</p><p><img src="/img/2024/crontrol-computer.webp" alt="crontrol-computer"></p><p>之后再来运行脚本，就可以实现目的了，每 3 秒就会按一下 右键。</p><p>后面再加入随机时间和通知</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">repeat</span><br><span class="line">    tell application &quot;System Events&quot;</span><br><span class="line">        key code 124</span><br><span class="line">    end tell</span><br><span class="line">    set randomDelay to (random number from 6 to 20)</span><br><span class="line">    display notification &quot;随机延迟时间为：&quot; &amp; randomDelay &amp; &quot; 秒&quot;</span><br><span class="line">    delay randomDelay</span><br><span class="line">end repeat</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;macOS 有一个自带的 APP 叫「脚本编辑器」，我想使用它，来实现每三秒就按一下方向键右→&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;lin</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>CopyQ 在 Mac 上意外退出的解决方法</title>
    <link href="https://powersee.github.io/2024/04/mac-copyq-error/"/>
    <id>https://powersee.github.io/2024/04/mac-copyq-error/</id>
    <published>2024-04-01T06:03:10.000Z</published>
    <updated>2024-04-01T06:03:42.866Z</updated>
    
    <content type="html"><![CDATA[<p>CopyQ 是我目前正在使用的「剪贴板管理工具」，它是在 GitHub 上开源的软件：<a href="https://github.com/hluk/CopyQ">https://github.com/hluk/CopyQ</a></p><p>目前星星的数量有 7 千多。之前使用它的时候，官方还没有提供 Mac ARM 版，直接下载使用的是 Intel 版本。</p><p>所以我还去研究怎么自己编译，折腾一番之后，才使用上 Apple silicon 版本的 CopyQ。</p><p>刚才发现这软件打不开了，一运行就提示「意外退出」。</p><p><img src="/img/2024/CopyQ-error.webp" alt="CopyQ-error"></p><p>我想着去 <a href="https://github.com/hluk/CopyQ/releases">GitHub</a> 上下载新版本试试看，结果发现现在已经提供 M1 版本的了，于是下载试试看。</p><p>由于这软件没有签名，所以默认情况下是打不开的。需要使用终端执行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo xattr -d com.apple.quarantine /Applications/CopyQ.app</span><br></pre></td></tr></table></figure><p>之后再尝试打开，发现还是会提示「意外退出」，和我之前的一样。。。</p><p>翻一下 issues，找到了<a href="https://github.com/hluk/CopyQ/issues/2652">解决方法</a></p><p>只需要在终端执行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">codesign --force --deep --sign - /Applications/CopyQ.app</span><br></pre></td></tr></table></figure><p>就可以再次打开了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;CopyQ 是我目前正在使用的「剪贴板管理工具」，它是在 GitHub 上开源的软件：&lt;a href=&quot;https://github.com/hluk/CopyQ&quot;&gt;https://github.com/hluk/CopyQ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;目前星星的数量有 7 千多</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Mac 使用终端命令打开和关闭应用</title>
    <link href="https://powersee.github.io/2024/03/mac-terminal-open-and-close-app/"/>
    <id>https://powersee.github.io/2024/03/mac-terminal-open-and-close-app/</id>
    <published>2024-03-23T04:31:59.000Z</published>
    <updated>2024-03-23T04:32:38.088Z</updated>
    
    <content type="html"><![CDATA[<p>打开，需要应用的完整路径和后缀</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">open /Applications/OBS.app</span><br></pre></td></tr></table></figure><p>关闭，只需要应用名</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">killall OBS</span><br></pre></td></tr></table></figure><p>既然可以用命令，来打开和关闭应用程序，那么结合定时任务，就能实现一些自动化操作。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;打开，需要应用的完整路径和后缀&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;open /Applications/OBS.app&lt;/s</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>IINA 自定义倍速播放</title>
    <link href="https://powersee.github.io/2024/03/iina-custom-speed/"/>
    <id>https://powersee.github.io/2024/03/iina-custom-speed/</id>
    <published>2024-03-21T04:54:59.000Z</published>
    <updated>2024-03-21T04:55:52.992Z</updated>
    
    <content type="html"><![CDATA[<p>IINA 是我在 Mac 上的常用视频播放器。</p><p>不过它默认的倍速比较奇葩。速度都是相乘的，比如乘 2，那么第一次就是速度变为 2，再按一次就是变为 4。</p><p><img src="/img/2024/IINA-default.webp" alt="IINA-default"></p><p>我想要的是像 potplayer 那样，按一下就增加 0.1 的速度。</p><p>于是我复制多一份配置出来，然后双击相关的命令，就可以看到快捷键被按下后，后台执行的具体命令。</p><p>例如这个「速度 乘 1.1 倍」</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">multiply speed 1.1</span><br></pre></td></tr></table></figure><p>这种叫 mvp 命令，我第一次接触。那么试一下，把 multiply 改为 add 试试，果然可以。</p><p>于是我便手动添加两个快捷键。使用的是中括号这两颗按键 <code>[</code> <code>]</code>，如果改为使用 x 和 c 就和 potplayer 一样，看个人喜好了。</p><p><img src="/img/2024/IINA-custom.webp" alt="IINA-custom"></p><p>其中加速我们可以用 add，但减速用 sub 好像不行。后来看了下别人怎么配置，才意识到没必要，直接加一个负数就行。</p><p><img src="/img/2024/IINA-speed.webp" alt="IINA-speed"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add speed 0.1</span><br></pre></td></tr></table></figure><p>加速就简单 add 正数就行了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;IINA 是我在 Mac 上的常用视频播放器。&lt;/p&gt;
&lt;p&gt;不过它默认的倍速比较奇葩。速度都是相乘的，比如乘 2，那么第一次就是速度变为 2，再按一次就是变为 4。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2024/IINA-default.webp&quot; alt=&quot;II</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Mac 端 QQ 设置直接登录</title>
    <link href="https://powersee.github.io/2024/03/mac-qq-login/"/>
    <id>https://powersee.github.io/2024/03/mac-qq-login/</id>
    <published>2024-03-07T07:15:58.000Z</published>
    <updated>2024-03-07T07:17:55.750Z</updated>
    
    <content type="html"><![CDATA[<p>每次我在 Mac 上登录 QQ，都需要在手机上点击一下「允许登录」，有时甚至需要扫一下二维码才能登录。</p><p>这就很麻烦，如果只是第一次在新设备上登录，需要进行这样的验证，那我可以理解。问题是我都用这电脑登录好多次了。</p><p>解决方法</p><p>打开 QQ 后，点击 Mac 状态栏的左上角， 图标旁边的 QQ，选择 「设置」，来到「登录设置」。</p><p>将「下次登录无需在手机端确认」这个开关打开就行。</p><p><img src="/img/2024/mac-qq-login.webp" alt="mac-qq-login"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;每次我在 Mac 上登录 QQ，都需要在手机上点击一下「允许登录」，有时甚至需要扫一下二维码才能登录。&lt;/p&gt;
&lt;p&gt;这就很麻烦，如果只是第一次在新设备上登录，需要进行这样的验证，那我可以理解。问题是我都用这电脑登录好多次了。&lt;/p&gt;
&lt;p&gt;解决方法&lt;/p&gt;
&lt;p&gt;打开 Q</summary>
      
    
    
    
    
    <category term="Mac" scheme="https://powersee.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>再一次被坚果云气到</title>
    <link href="https://powersee.github.io/2024/02/jianguoyun/"/>
    <id>https://powersee.github.io/2024/02/jianguoyun/</id>
    <published>2024-02-26T03:19:00.000Z</published>
    <updated>2024-02-26T03:22:12.208Z</updated>
    
    <content type="html"><![CDATA[<p>今天再一次被坚果云气到。我平时制作的视频封面，都是一张张图片，我将它们都存到一个文件夹里。然后使用坚果云同步到云端。</p><p>其实主要是做一个备份，万一电脑真的出了问题，我还可以换设备，从网络上下载回来。</p><p>23 年的某一次更新，导致坚果云现在的同步文件夹，都只能在一个特定的文件夹下。例如我使用的是 Mac，它在 <code>$HOME/Library/CloudStorage/</code></p><p>而在此之前，我们的同步文件夹，是可以在其它地方的。比如我「下载」文件夹下有一个 A 文件夹，「文档」文件夹下有一个 B 文件夹，我是可以使用坚果云来同步 A 和 B 的。去年的这次更新我是很不满的，但是没办法了，不满也没用，忍着用呗，用着用着就习惯了。</p><p>现在说回来，我现在电脑有一个同步文件夹，存放的都是图片。图片放进去后，坚果云默认开启一个「不占用电脑空间」的功能。也就是把我图片上传云端后，就将图片从我电脑删除掉，那个位置只放一张缩略图。</p><p>比如原本是一张 1.8MB 的图片，这样操作后，剩一张 4KB 的缩略图。</p><p>这个功能是不错，可能对有些人来说非常有用。但是，我其实不怎么用得着。毕竟我没有存放一堆的图片，电脑给占用几百 MB 我不怎么在意。</p><p>所以我是想着关闭这个功能的，但是，它好像在 Windows 端才有关闭的功能。</p><p><img src="/img/2024/Not-occupy-Space.webp" alt="Not-occupy-Space"></p><p>来源：<a href="https://help.jianguoyun.com/?p=4220">官方帮助文档</a></p><p>Windows 右键文件夹后，有一个「保持离线可用」的功能。Mac 端没有。</p><p><img src="/img/2024/Mac-jianguoyun.webp" alt="Mac-jianguoyun"></p><p>不过我现在打字的时候发现，文件夹右边的云朵图标，应该就是「保持离线」。当然我之前也是点过它的，知道点击后可以把文件从云端下载到电脑。但是我怎么感觉，过段时间，它又会自动删除……</p><p>看来我并没有记错，通过 <a href="https://www.zhihu.com/question/371962536/answer/3144326216">知乎上其他网友</a> 的吐槽，坚果云真的会自动关闭「保持离线」这个功能的。</p><p>总之刚才我就先点击云朵☁️图标，把图片都下载电脑后，打算不同步这个文件夹了，这样坚果云应该就不会老是去删除了吧。</p><p>于是我打开坚果云的主界面，选择这个文件夹，然后点击「取消同步」。</p><p><img src="/img/2024/cancel-sync.webp" alt="cancel-sync"></p><p>结果尴尬的事情发生了，坚果云直接把这个文件夹里面的内容，从我的电脑里面，完全删除。。。跟我预期的完全不一样呀，我以为「取消同步」就是坚果云你以后不要再去管这个文件夹了。</p><p>但是软件它好像觉得，我不想要这个文件夹在我的电脑里了，有些无语。</p><p>没办法，我只能再次同步回来。这次就点击文件夹后面的云朵图标，希望它不会再删除我电脑里的图片吧。不过我也感觉这些图片只备份到坚果云，不怎么安全，说不定哪天又一个误操作，只能电脑和云端都删除了，所以还是复制一份到 NAS 里吧。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;今天再一次被坚果云气到。我平时制作的视频封面，都是一张张图片，我将它们都存到一个文件夹里。然后使用坚果云同步到云端。&lt;/p&gt;
&lt;p&gt;其实主要是做一个备份，万一电脑真的出了问题，我还可以换设备，从网络上下载回来。&lt;/p&gt;
&lt;p&gt;23 年的某一次更新，导致坚果云现在的同步文件夹</summary>
      
    
    
    
    
    <category term="随笔" scheme="https://powersee.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>如何复制 Windows 上无法选中的文字？Textify</title>
    <link href="https://powersee.github.io/2024/02/Textify/"/>
    <id>https://powersee.github.io/2024/02/Textify/</id>
    <published>2024-02-09T07:35:23.000Z</published>
    <updated>2024-02-09T07:36:18.002Z</updated>
    
    <content type="html"><![CDATA[<p>这是我 win10 电脑上的系统设置界面，这些文字并没有办法用鼠标选中。</p><p><img src="/img/2024/win-setting.webp" alt="win-setting"></p><p>所以我们想要复制这些文字也就做不到了。</p><p>而最近我发现了一个开源的应用 Textify，使用它就可以解决这个问题。</p><ul><li><a href="https://github.com/m417z/Textify">GitHub</a></li><li><a href="https://ramensoftware.com/textify">下载链接</a></li></ul><p>下载后需要安装，打开后软件长这样。可以看到默认的激活方式是 shift + 鼠标中键，也就是把鼠标滚轮按下去。</p><p><img src="/img/2024/Textify.png" alt="Textify"></p><p>鼠标指针来到需要复制的地方，激活一下，就可以复制了。</p><p><img src="/img/2024/Textify-win-text.webp" alt="Textify-win-text"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;这是我 win10 电脑上的系统设置界面，这些文字并没有办法用鼠标选中。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/2024/win-setting.webp&quot; alt=&quot;win-setting&quot;&gt;&lt;/p&gt;
&lt;p&gt;所以我们想要复制这些文字也就做不到了。&lt;/p&gt;
&lt;p&gt;而最</summary>
      
    
    
    
    
    <category term="Windows" scheme="https://powersee.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>yt-dlp 使用心得（一）下载 YouTube 视频和音频</title>
    <link href="https://powersee.github.io/2024/01/yt-dlp-1/"/>
    <id>https://powersee.github.io/2024/01/yt-dlp-1/</id>
    <published>2024-01-19T03:47:05.000Z</published>
    <updated>2024-01-19T03:47:53.654Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>我的使用环境是 macOS，使用 pip 安装。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip3 install yt-dlp</span><br></pre></td></tr></table></figure><p>之后查看版本</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yt-dlp --version</span><br><span class="line">2023.12.30</span><br></pre></td></tr></table></figure><p>在我开启系统代理的情况下，我可以直接使用它，它会自动走代理。</p><p>如果把代理关掉，再来使用它，自然连接不上。会出现这样的警告。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WARNING: [youtube] Unable to download webpage: (&lt;urllib3.connection.HTTPSConnection object at 0x10788cb10&gt;, &#x27;Connection to www.youtube.com timed out. (connect timeout=20.0)&#x27;)</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>获取视频的结构（就是看它有哪些分辨率，哪些音频），使用大写的 F</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yt-dlp -F https://www.youtube.com/xxxxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><p>不加任何参数（也就是上面的命令去掉 <code>-F</code>），会自动下载质量最高的视频和音频，然后将它们合并起来。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yt-dlp https://www.youtube.com/xxxxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><p>当然我们也可以自由选择，例如我们不需要那么高分辨率的视频，我只要 720P 就够了之类的。那么可以序号相加的方式，例如</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yt-dlp -f 251+614 https://www.youtube.com/xxxxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><h3 id="下载音频"><a href="#下载音频" class="headerlink" title="下载音频"></a>下载音频</h3><p>我个人有这样的需要，想要下载视频的音频部分。所以我了解到有这样的参数，<code>-x</code> 参数，可以用来提取音频。</p><p>不过我发现这样是把完整的视频下载之后，再从视频中把音频提取出来。然后再删除掉视频……</p><p>感觉不环保，我明明不需要视频部分，它下载之后只保留音频，再删掉视频……</p><p>当然也有只下载音频的方法，先用 <code>-F</code> 查询信息，然后选择想要的音频 id 就行，例如</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yt-dlp -f 251 https://www.youtube.com/xxxxxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><p>但是这样也比较麻烦，得先查询嘛。于是继续了解，发现可以使用 <code>-f ba</code> ，也就是 best audio 的首字母缩写，只下载质量最好的音频。</p><p>不过这样有时候下载的音频是 webm 格式的。</p><p>我观察了一个视频</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">233 mp4   audio only        │                  m3u8  │ audio only          unknown             Default</span><br><span class="line">234 mp4   audio only        │                  m3u8  │ audio only          unknown             Default</span><br><span class="line">599 m4a   audio only      2 │    2.50MiB   31k https │ audio only          mp4a.40.5   31k 22k ultralow, m4a_dash</span><br><span class="line">600 webm  audio only      2 │    2.70MiB   33k https │ audio only          opus        33k 48k ultralow, webm_dash</span><br><span class="line">139 m4a   audio only      2 │    3.96MiB   49k https │ audio only          mp4a.40.5   49k 22k low, m4a_dash</span><br><span class="line">249 webm  audio only      2 │    3.99MiB   49k https │ audio only          opus        49k 48k low, webm_dash</span><br><span class="line">250 webm  audio only      2 │    5.31MiB   65k https │ audio only          opus        65k 48k low, webm_dash</span><br><span class="line">140 m4a   audio only      2 │   10.51MiB  129k https │ audio only          mp4a.40.2  129k 44k medium, m4a_dash</span><br><span class="line">251 webm  audio only      2 │    9.83MiB  121k https │ audio only          opus       121k 48k medium, webm_dash</span><br></pre></td></tr></table></figure><p>只看它音频部分，其实质量最高的应该是 <code>140 m4a   audio only      2 │   10.51MiB  129k</code> 这个才对，不管是文件体积还是码率，它都是最大的。</p><p>但实际上使用 ba 参数，下载的是最高一项 webm 这个。难道是因为它是 48K 而上面的 m4a 是 44k 的？</p><p>那么我添加一个限制，排除掉 webm</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yt-dlp -f &#x27;bestaudio/best&#x27; --format &#x27;bestaudio[ext!=webm]&#x27;</span><br></pre></td></tr></table></figure><p>这样后面再加上视频链接即可。</p><p>然后我再写一个 alias，之后我只需要 「ya 视频链接」，就能下载一个视频的音频了。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias ya=&quot;yt-dlp -f &#x27;bestaudio/best&#x27; --format &#x27;bestaudio[ext!=webm]&#x27;&quot;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h3&gt;&lt;p&gt;我的使用环境是 macOS，使用 pip 安装。&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;tabl</summary>
      
    
    
    
    
    <category term="下载" scheme="https://powersee.github.io/tags/%E4%B8%8B%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>油猴脚本，给网站添加一个「粘贴」按钮</title>
    <link href="https://powersee.github.io/2024/01/downsub-tampermonkey/"/>
    <id>https://powersee.github.io/2024/01/downsub-tampermonkey/</id>
    <published>2024-01-13T03:42:42.000Z</published>
    <updated>2024-01-13T03:57:48.499Z</updated>
    
    <content type="html"><![CDATA[<p>之前的文章 <a href="/2024/01/youtube-bilibili-downsub/">如何下载 YouTube、bilibili 的视频字幕</a> 讲到，我通过 <a href="https://downsub.com/">https://downsub.com/</a> 这个网站来下载视频字幕。</p><p>这个网站使用起来很简单，粘贴视频链接，然后点击下载就行。但是我使用的频率还挺高的，所以想来研究一下怎么简化流程。</p><p>目前在研究，怎么在下载按钮的旁边，添加一个「粘贴」按钮。</p><p><img src="/img/2024/downsub-default-5046720.webp" alt="downsub-default"></p><p>分析一下这块地方的代码</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-v-d9168f7c</span>=<span class="string">&quot;&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-center pb-0 col-sm-10 col-md-8 col-lg-8 col-xl-6 col-12&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!----&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">data-v-d9168f7c</span>=<span class="string">&quot;&quot;</span> <span class="attr">novalidate</span>=<span class="string">&quot;novalidate&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span> <span class="attr">class</span>=<span class="string">&quot;v-form&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!----&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-v-d9168f7c</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;v-input v-input--is-label-active v-input--is-dirty v-input--dense theme--dark v-text-field v-text-field--single-line v-text-field--solo v-text-field--solo-flat v-text-field--is-booted v-text-field--enclosed v-text-field--outlined v-text-field--placeholder&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-input__control&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-input__slot&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">fieldset</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">legend</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;notranslate&quot;</span>&gt;</span><span class="symbol">&amp;ZeroWidthSpace;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-text-field__slot&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">id</span>=<span class="string">&quot;input-34&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入链接以下载字幕。例：https://youtu.be/rN7yhDl1cuk&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-input__append-inner&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-input__icon v-input__icon--clear&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;clear icon&quot;</span> <span class="attr">class</span>=<span class="string">&quot;v-icon notranslate v-icon--link material-icons theme--dark&quot;</span>&gt;</span>clear<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-text-field__details&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-messages theme--dark&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-messages__wrapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-input__append-outer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-v-d9168f7c</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mb-5 v-btn v-btn--has-bg theme--dark v-size--default primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;top: -5px;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;v-btn__content&quot;</span>&gt;</span>下载 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!----&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>下载按钮是这部分</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;v-input__append-outer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-v-d9168f7c</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mb-5 v-btn v-btn--has-bg theme--dark v-size--default primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;top: -5px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;v-btn__content&quot;</span>&gt;</span>下载 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我先在浏览器的控制台里面，选中 button 元素。此时这个 button 就是 $0</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = $0.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span><br><span class="line">$0.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="title function_">appendChild</span>(a);</span><br></pre></td></tr></table></figure><p>使用这条命令可以复制一份。</p><p><img src="/img/2024/downsub-two-button.jpg" alt="downsub-two-button"></p><p>最终的油猴脚本内容</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         给 downsub 添加粘贴按钮</span></span><br><span class="line"><span class="comment">// @namespace    http://tampermonkey.net/</span></span><br><span class="line"><span class="comment">// @version      1.0</span></span><br><span class="line"><span class="comment">// @description  try to take over the world!</span></span><br><span class="line"><span class="comment">// @author       powersee</span></span><br><span class="line"><span class="comment">// @match        https://downsub.com/*</span></span><br><span class="line"><span class="comment">// @icon         https://www.google.com/s2/favicons?sz=64&amp;domain=downsub.com</span></span><br><span class="line"><span class="comment">// @grant        GM_setClipboard</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> downloadButton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.v-btn--has-bg.primary&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (downloadButton) &#123;</span><br><span class="line">            <span class="keyword">const</span> pasteButton = downloadButton.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span><br><span class="line">            pasteButton.<span class="property">innerHTML</span> = <span class="string">&#x27;粘贴&#x27;</span>;</span><br><span class="line">            pasteButton.<span class="property">type</span> = <span class="string">&#x27;button&#x27;</span>;</span><br><span class="line">            pasteButton.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&#x27;0.2em&#x27;</span>;</span><br><span class="line">            pasteButton.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> inputField = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input[name=&quot;url&quot;]&#x27;</span>);</span><br><span class="line">                <span class="keyword">if</span> (inputField) &#123;</span><br><span class="line">                    navigator.<span class="property">clipboard</span>.<span class="title function_">readText</span>().<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">clipboardText</span>) &#123;</span><br><span class="line">                        inputField.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="variable language_">console</span>.<span class="property">log</span>, <span class="literal">false</span>);</span><br><span class="line">                        inputField.<span class="property">value</span> = clipboardText;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">var</span> evt = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&quot;HTMLEvents&quot;</span>);</span><br><span class="line">                        evt.<span class="title function_">initEvent</span>(<span class="string">&quot;input&quot;</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">                        inputField.<span class="title function_">dispatchEvent</span>(evt);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            downloadButton.<span class="property">parentNode</span>.<span class="title function_">appendChild</span>(pasteButton);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>代码对网页的改变就是多了一个粘贴按钮。以后我不用去点击输入框，只需要先点一下「粘贴」，然后再点击「下载」就行。</p><p><img src="/img/2024/downsub-new-button.webp" alt="downsub-new-button"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;之前的文章 &lt;a href=&quot;/2024/01/youtube-bilibili-downsub/&quot;&gt;如何下载 YouTube、bilibili 的视频字幕&lt;/a&gt; 讲到，我通过 &lt;a href=&quot;https://downsub.com/&quot;&gt;https://downsub.</summary>
      
    
    
    
    
    <category term="JavaScript" scheme="https://powersee.github.io/tags/JavaScript/"/>
    
  </entry>
  
</feed>
