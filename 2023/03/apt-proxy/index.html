<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog" />
  <meta name="description" content="Powersee çš„ä¸ªäººåšå®¢" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  <link rel="dns-prefetch" href="https://at.alicdn.com">
  
  
  
  <link rel="stylesheet" type="text/css" href="/./style/main.css">
	<link rel="shortcut icon" href="/blog.svg" title="Favicon">
	<title>éƒ½ä»€ä¹ˆå¹´ä»£äº†ï¼Œè¿˜åœ¨æ‰‹åŠ¨ä¿®æ”¹ Linux è½¯ä»¶æºï¼ŸAPT Proxy ä½¿ç”¨ä½“éªŒ</title>
  
  
<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="Powerseeçš„åšå®¢" type="application/atom+xml">
</head>
<body>
  <canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">Powerseeçš„åšå®¢</a>
  <a class="face-img" href="/">
    <!-- <img src="/./img/powersee.jpeg"> -->
    <svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180">
      <rect width="100%" height="100%" fill="black"></rect>
      <text x="50%" y="45%" text-anchor="middle" dy=".3em" fill="white" font-size="48" font-family="sans-serif">Power</text>
        <text x="50%" y="65%" text-anchor="middle" dy=".3em" fill="white" font-size="48" font-family="sans-serif">_see</text>
    </svg>
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    éƒ½ä»€ä¹ˆå¹´ä»£äº†ï¼Œè¿˜åœ¨æ‰‹åŠ¨ä¿®æ”¹ Linux è½¯ä»¶æºï¼ŸAPT Proxy ä½¿ç”¨ä½“éªŒ
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2023-03-17T16:46:47.000Z" itemprop="datePublished">2023-03-18</time>
      </li>
      <li>
        
      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote>
<p>APT Proxy æ˜¯ä¸€æ¬¾è½»é‡çš„ã€å¯é çš„ APT &#x2F; YUM &#x2F; APK åŒ…ï¼ˆUbuntu &#x2F; Debian &#x2F; CentOS &#x2F; ALPINE ï¼‰ç¼“å­˜å·¥å…·ï¼Œèƒ½å¤Ÿåœ¨å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿç¯å¢ƒä¸­è¿è¡Œã€‚</p>
</blockquote>
<p>è¿™æ˜¯æ¥è‡ª <a target="_blank" rel="noopener" href="https://github.com/soulteary/apt-proxy/blob/main/README_CN.md">å®˜æ–¹æ–‡æ¡£</a> å¼€å¤´çš„ä»‹ç»ï¼Œç°åœ¨çš„ä½œè€… <a target="_blank" rel="noopener" href="https://soulteary.com/">è‹æ´‹</a> æ˜¯ä¸€ä½èƒ½åŠ›å¾ˆå¼ºçš„åšä¸»ï¼Œä»–å¯¹åœç•™åœ¨ 2015 å¹´çš„åŸé¡¹ç›®è¿›è¡Œä¿®æ”¹ï¼Œæœ‰äº†ç°åœ¨è¿™ä¸ªç‰ˆæœ¬ã€‚</p>
<p>è€Œä¸”å·²ç»ä¸åªæ˜¯ç»™ apt ç”¨è€Œå·²äº†ï¼Œè¿˜å¯ä»¥ç»™ centos å’Œ alpine ç”¨ï¼Œæ›´åŠ å¼ºå¤§äº†ã€‚</p>
<p>æƒ³è¦æ›´æ·±å…¥çš„äº†è§£ï¼Œå¯ä»¥è§‚çœ‹è‹æ´‹å¤§ä½¬çš„ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://soulteary.com/2022/06/14/lightweight-and-small-zero-configuration-apt-acceleration-tool-apt-proxy.html">è½»é‡å°å·§çš„é›¶é…ç½® APT åŠ é€Ÿå·¥å…·ï¼šAPT Proxy - è‹æ´‹åšå®¢ (soulteary.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://soulteary.com/2022/11/20/linux-package-download-acceleration-tool-apt-proxy.html">Linux è½¯ä»¶åŒ…ä¸‹è½½åŠ é€Ÿå·¥å…·ï¼šAPT Proxy - è‹æ´‹åšå®¢ (soulteary.com)</a></p>
<p>ç°åœ¨ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°è£…å¥½æœåŠ¡å™¨åï¼Œå¯ä»¥ä¸ç”¨å»ä¿®æ”¹è½¯ä»¶æºäº†ã€‚</p>
<p>å¹³æ—¶æˆ‘å¾—åˆ°ä¸€ä¸ªçº¯å‡€çš„ Ubuntu ç³»ç»Ÿåï¼Œä¸€èˆ¬éƒ½ä¼šå»ä¿®æ”¹ <code>/etc/apt/sources.list</code> ï¼Œå°†é‡Œé¢çš„å†…å®¹æ”¹ä¸ºæ¸…åæˆ–è€…é˜¿é‡Œäº‘çš„é•œåƒæºã€‚ç°åœ¨ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨å»ä¿®æ”¹äº†ã€‚åªè¦åœ¨ä½¿ç”¨ apt çš„æ—¶å€™è®¾ç½®ä»£ç†ï¼ŒæŒ‡å‘è¿™ä¸ªå·¥å…·ï¼Œå°±ä¼šè‡ªåŠ¨ä½¿ç”¨æœ€å¿«çš„é•œåƒæºã€‚</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è¿è¡Œèµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œç”¨ docker ä¸€æ¡å‘½ä»¤å³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -d --name=apt-proxy -p 3142:3142 soulteary/apt-proxy</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦æ˜ å°„ä¸€ä¸ªç«¯å£ <code>3142</code> è€Œå·²ã€‚æŸ¥çœ‹å®¹å™¨çš„ log å¯ä»¥çœ‹åˆ°è¿™äº›ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2023/03/14 06:15:43 running apt-proxy </span><br><span class="line">2023/03/14 06:15:44 Start benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:44 Finished benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:44 using fastest Ubuntu mirror http://ftp.sjtu.edu.cn/ubuntu/</span><br><span class="line">2023/03/14 06:15:44 Start benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:44 Finished benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:44 using fastest Debian mirror http://repo.huaweicloud.com/debian/</span><br><span class="line">2023/03/14 06:15:44 Start benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:45 Finished benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:45 using fastest CentOS mirror https://mirrors.aliyun.com/centos/</span><br><span class="line">2023/03/14 06:15:45 Start benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:45 Finished benchmarking mirrors</span><br><span class="line">2023/03/14 06:15:45 using fastest Alpine mirror http://mirrors.aliyun.com/alpine/</span><br><span class="line">2023/03/14 06:15:45 proxy listening on 0.0.0.0:3142</span><br><span class="line">2023/03/14 06:15:45 Program has been started ğŸš€</span><br></pre></td></tr></table></figure>

<p>ä»æ—¥å¿—å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä¼šè‡ªåŠ¨æµ‹å‡ºé€Ÿåº¦æœ€å¿«çš„é•œåƒç«™ã€‚è€Œä¸”æ­¤æ—¶æˆ‘ä»¬è®¿é—® 3142 ç«¯å£ï¼Œè¿˜å¯ä»¥çœ‹åˆ° web ç•Œé¢ã€‚</p>
<p><img src="/img/2023/image-20230314141943091.png" alt="apt-proxy-web"></p>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>æˆ‘è¿è¡Œ apt-proxy çš„æœºå™¨ IP æ˜¯ 192.168.68.172ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥è¿™æ ·è¿™æ ·æ¥ä½¿ç”¨å®ƒã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># `apt-get update` with apt-proxy service</span><br><span class="line">http_proxy=http://192.168.68.172:3142 apt-get -o pkgProblemResolver=true -o Acquire::http=true update </span><br><span class="line"># `apt-get install vim -y` with apt-proxy service</span><br><span class="line">http_proxy=http://192.168.68.172:3142 apt-get -o pkgProblemResolver=true -o Acquire::http=true install vim -y</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶æ‰§è¡Œä¹‹åè¾“å‡ºçš„ä¿¡æ¯ä¾ç„¶æ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Get:1 http://archive.ubuntu.com/ubuntu jammy InRelease [270 kB]</span><br><span class="line">Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]</span><br><span class="line">Get:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [119 kB]</span><br><span class="line">Get:4 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [829 kB]</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å®ƒå› ä¸ºä½¿ç”¨äº†ä»£ç†ï¼Œå…¶å®æ˜¯ç”¨äº† <a target="_blank" rel="noopener" href="http://ftp.sjtu.edu.cn/ubuntu/">http://ftp.sjtu.edu.cn/ubuntu/</a> è¿™ä¸ªé•œåƒæºï¼Œä»é€Ÿåº¦æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜æ˜¾æ„Ÿå—åˆ°ã€‚æˆ–è€…ç›´æ¥æŸ¥çœ‹ apt-proxy çš„æ—¥å¿—ä¹Ÿèƒ½çœ‹åˆ°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2023/03/18 03:01:30 rewrote &quot;http://archive.ubuntu.com/ubuntu/dists/jammy/InRelease&quot; to &quot;http://ftp.sjtu.edu.cn/ubuntu/dists/jammy/InRelease&quot;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå®ƒå¦ä¸€ä¸ªä¼˜åŠ¿ï¼Œå°±æ˜¯å®ƒä¼šç¼“å­˜ã€‚å¦‚æœæˆ‘ä»¬æœ‰å¤šå°æœåŠ¡å™¨çš„è¯ï¼Œé‚£ä¹ˆç¬¬ä¸€å°å®‰è£… vimï¼Œapt-proxy ä¼šå°† vim çš„å®‰è£…æ–‡ä»¶ç¼“å­˜ä¸‹æ¥ï¼Œè€Œä¹‹åçš„ç¬¬äºŒå°ï¼Œå®ƒå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜äº†ï¼Œä¸éœ€è¦å»é•œåƒæºä¸‹è½½äº†ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚</p>
<h3 id="ç¼©çŸ­å‘½ä»¤"><a href="#ç¼©çŸ­å‘½ä»¤" class="headerlink" title="ç¼©çŸ­å‘½ä»¤"></a>ç¼©çŸ­å‘½ä»¤</h3><p>ä¸è¿‡å®ƒè¿™å‘½ä»¤ä¹Ÿå¤ªé•¿äº†å§ï¼Œæ¯æ¬¡éƒ½å¾—å¤åˆ¶ç²˜è´´ã€‚æˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ alias</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias aptp=&quot;http_proxy=http://192.168.68.172:3142 apt-get -o pkgProblemResolver=true -o Acquire::http=true&quot;</span><br></pre></td></tr></table></figure>

<p>æˆ‘æŠŠè¿™ä¹ˆä¸€ä¸²å‘½ä»¤ï¼Œèµ·ä¸ªåˆ«åä¸º <code>aptp</code>ï¼Œä¹‹åæˆ‘å¯ä»¥è¿™æ ·æ¥ä½¿ç”¨å®ƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">aptp update</span><br><span class="line">aptp install zsh</span><br></pre></td></tr></table></figure>

<p>éå¸¸å¥½ç”¨çš„ä¸€æ¬¾å·¥å…·ï¼Œæ¨èç»å¸¸åœ¨æœ¬åœ°æŠ˜è…¾æœåŠ¡å™¨çš„æœ‹å‹ï¼Œéƒ½å¯ä»¥å»å°è¯•ä¸€ä¸‹ã€‚</p>

      </div>
        <div class="support-author">
          <p>åšå®¢é“¾æ¥:
          <a href="https://powersee.github.io/" target="_blank">https://powersee.github.io/</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
          <p>å¤‡ä»½åšå®¢:
          <a href="https://blog.powersee.top/" target="_blank">https://blog.powersee.top/</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          

        </div>
      </div>
    </div>
   </div>
</main>
<div class="footer">
  <div class="info">
    <p>
    <a target="_blank" rel="noopener" href="https://hexo.io"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a target="_blank" rel="noopener" href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2018-2023 </p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = ''.split(',');
  var canConsole = 'false';
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });

}(consoleConfig));

// js ä¹Ÿæ”¾åˆ° è…¾è®¯äº‘ cos
</script><script type="text/javascript" src="https://blog-img-1259157239.cos.ap-guangzhou.myqcloud.com/js/main.js"></script>
<script type="text/javascript" src="/js/my.js"></script>

  <script src="//at.alicdn.com/t/font_159214_mvtxvg9me9.js"></script>
</body>
</html>
